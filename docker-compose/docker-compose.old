version: '3.8'

services:
  frontend: 
    image: saurabhkr952/frontend:1.0.0                              
    container_name: frontend
    ports:
      - "8080:8080"                                  # running on port 8080
    environment:                                     # backend URL with port 
      VITE_API_URL: 'http://13.235.69.2'             
      VITE_PORT: "4000"
    restart: unless-stopped   
    networks:
      - mynet

  backend:                                                    
    image: saurabhkr952/backend:2.0.0
    container_name: backend
    ports:
    - "4000:4000"                                    # expose backend port
    environment:
      PORT: "4000"
      CORS_ORIGIN: "*"
      
      # DB env variables
      DB_NAME: "codeentra_schema"
      DB_USERNAME: "postgres"
      DB_PASSWORD: "password"
      DB_HOST: "3.110.96.89"
    restart: unless-stopped

    networks:
      - mynet

networks:
  mynet:
    driver: bridge
