import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useQuery, useQueryClient } from '@tanstack/react-query';
import { useAuth } from '../contexts/AuthContext';
import { useTheme } from '../contexts/ThemeContext';
import { 
  getAllInternships, 
  getAllContacts, 
  getAllNotifications,
  markNotificationAsRead,
  deleteNotification,
  clearAllNotifications,
  getAllPricingsAdmin,
  updateMultiplePricings,
  deleteContact,
  deleteInternship,
  deletePricing,
  getAllUpdatesAdmin,
  createUpdate,
  updateUpdate,
  deleteUpdate,
  getAllQuestionsAdmin,
  createQuestion,
  updateQuestion,
  deleteQuestion,
  getAllProductsAdmin,
  createProduct,
  updateProduct,
  deleteProduct,
  getAllServicesAdmin,
  createService,
  updateService,
  deleteService,
  getAllTestimonialsAdmin,
  createTestimonial,
  updateTestimonial,
  deleteTestimonial,
  getAllContactInfoAdmin,
  createContactInfo,
  updateContactInfo,
  deleteContactInfo,
  getAllFooterAdmin,
  createFooter,
  updateFooter,
  deleteFooter,
  getAllNavbarAdmin,
  createNavbar,
  updateNavbar,
  deleteNavbar,
  getAdminProfile,
  changePassword,
  updateAdminEmail,
  uploadProfilePhoto,
  deleteProfilePhoto
} from '../services/api';
import { Button } from '../components/ui/button';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from '../components/ui/dialog';
import { Input } from '../components/ui/input';
import { Label } from '../components/ui/label';
import { Textarea } from '../components/ui/textarea';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from '../components/ui/alert-dialog';
import { toast } from 'sonner';
import logo from '../img/logo.png';

// API URL for image serving
const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:4000';
const API_PORT = import.meta.env.VITE_PORT || '4000';
const apiUrlForImages = API_BASE_URL.includes('://') ? API_BASE_URL : `http://${API_BASE_URL}:${API_PORT}`;

import { 
  LayoutDashboard, 
  Users, 
  Mail, 
  LogOut, 
  FileText, 
  MessageSquare,
  TrendingUp,
  Calendar,
  UserCircle,
  Bell,
  X,
  Settings,
  Trash2,
  Bot,
  Plus,
  Edit,
  Package,
  Star,
  MapPin,
  Phone,
  User,
  Lock,
  KeyRound,
  Moon,
  Sun
} from 'lucide-react';

const Dashboard = () => {
  const { isAuthenticated, logout } = useAuth();
  const navigate = useNavigate();
  const queryClient = useQueryClient();
  const { theme, toggleTheme } = useTheme();

  // Theme helper functions
  const themeClasses = {
    bg: {
      main: theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50',
      card: theme === 'dark' ? 'bg-gray-800' : 'bg-white',
      cardHover: theme === 'dark' ? 'bg-gray-700' : 'bg-gray-50',
      sidebar: theme === 'dark' ? 'bg-gray-800' : 'bg-white',
    },
    text: {
      primary: theme === 'dark' ? 'text-white' : 'text-gray-900',
      secondary: theme === 'dark' ? 'text-gray-400' : 'text-gray-600',
      muted: theme === 'dark' ? 'text-gray-500' : 'text-gray-500',
    },
    border: {
      default: theme === 'dark' ? 'border-gray-700' : 'border-gray-200',
      light: theme === 'dark' ? 'border-gray-600' : 'border-gray-300',
    },
  };
  const [internships, setInternships] = useState([]);
  const [contacts, setContacts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [initialLoad, setInitialLoad] = useState(true);
  const [activeSection, setActiveSection] = useState('overview');
  const [notifications, setNotifications] = useState([]);
  const [showNotifications, setShowNotifications] = useState(false);
  const [pricings, setPricings] = useState([]);
  const [pricingLoading, setPricingLoading] = useState(false);
  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);
  const [itemToDelete, setItemToDelete] = useState({ type: null, id: null });
  const [addPricingDialogOpen, setAddPricingDialogOpen] = useState(false);
  const [newPricing, setNewPricing] = useState({ duration: '', price: '' });
  const [addingPricing, setAddingPricing] = useState(false);
  const [updates, setUpdates] = useState([]);
  const [updatesLoading, setUpdatesLoading] = useState(false);
  const [addUpdateDialogOpen, setAddUpdateDialogOpen] = useState(false);
  const [editUpdateDialogOpen, setEditUpdateDialogOpen] = useState(false);
  const [newUpdate, setNewUpdate] = useState({ title: '', description: '', type: 'announcement', isActive: true });
  const [editingUpdate, setEditingUpdate] = useState(null);
  const [savingUpdate, setSavingUpdate] = useState(false);
  const [conversations, setConversations] = useState([]);
  const [conversationsLoading, setConversationsLoading] = useState(false);
  const [addQuestionDialogOpen, setAddQuestionDialogOpen] = useState(false);
  const [editQuestionDialogOpen, setEditQuestionDialogOpen] = useState(false);
  const [newQuestion, setNewQuestion] = useState({ 
    question: '', 
    options: [{ option: '', answer: '', nextQuestionId: null }], 
    isActive: true, 
    isInitial: false, 
    orderIndex: 0 
  });
  const [editingQuestion, setEditingQuestion] = useState(null);
  const [savingQuestion, setSavingQuestion] = useState(false);
  const [products, setProducts] = useState([]);
  const [productsLoading, setProductsLoading] = useState(false);
  const [addProductDialogOpen, setAddProductDialogOpen] = useState(false);
  const [editProductDialogOpen, setEditProductDialogOpen] = useState(false);
  const [newProduct, setNewProduct] = useState({ 
    name: '', 
    description: '', 
    url: '', 
    icon: 'Sparkles',
    features: [], 
    isActive: true, 
    orderIndex: 0 
  });
  const [editingProduct, setEditingProduct] = useState(null);
  const [savingProduct, setSavingProduct] = useState(false);
  const [newFeature, setNewFeature] = useState('');
  const [services, setServices] = useState([]);
  const [servicesLoading, setServicesLoading] = useState(false);
  const [addServiceDialogOpen, setAddServiceDialogOpen] = useState(false);
  const [editServiceDialogOpen, setEditServiceDialogOpen] = useState(false);
  const [newService, setNewService] = useState({ 
    title: '', 
    description: '', 
    fullDescription: '',
    icon: 'code',
    isActive: true, 
    orderIndex: 0 
  });
  const [editingService, setEditingService] = useState(null);
  const [savingService, setSavingService] = useState(false);
  const [testimonials, setTestimonials] = useState([]);
  const [testimonialsLoading, setTestimonialsLoading] = useState(false);
  const [addTestimonialDialogOpen, setAddTestimonialDialogOpen] = useState(false);
  const [editTestimonialDialogOpen, setEditTestimonialDialogOpen] = useState(false);
  const [newTestimonial, setNewTestimonial] = useState({ 
    quote: '', 
    name: '', 
    title: '',
    company: '',
    rating: 5,
    isActive: true, 
    orderIndex: 0 
  });
  const [editingTestimonial, setEditingTestimonial] = useState(null);
  const [savingTestimonial, setSavingTestimonial] = useState(false);
  const [contactInfo, setContactInfo] = useState([]);
  const [contactInfoLoading, setContactInfoLoading] = useState(false);
  const [addContactInfoDialogOpen, setAddContactInfoDialogOpen] = useState(false);
  const [editContactInfoDialogOpen, setEditContactInfoDialogOpen] = useState(false);
  const [newContactInfo, setNewContactInfo] = useState({
    type: 'office',
    label: '',
    value: '',
    orderIndex: 0,
    isActive: true,
  });
  const [editingContactInfo, setEditingContactInfo] = useState(null);
  const [savingContactInfo, setSavingContactInfo] = useState(false);
  const [footer, setFooter] = useState([]);
  const [footerLoading, setFooterLoading] = useState(false);
  const [addFooterDialogOpen, setAddFooterDialogOpen] = useState(false);
  const [editFooterDialogOpen, setEditFooterDialogOpen] = useState(false);
  const [newFooter, setNewFooter] = useState({
    section: 'company',
    title: '',
    content: '',
    url: '',
    icon: '',
    orderIndex: 0,
    isActive: true,
  });
  const [editingFooter, setEditingFooter] = useState(null);
  const [savingFooter, setSavingFooter] = useState(false);
  const [navbar, setNavbar] = useState([]);
  const [navbarLoading, setNavbarLoading] = useState(false);
  const [addNavbarDialogOpen, setAddNavbarDialogOpen] = useState(false);
  const [editNavbarDialogOpen, setEditNavbarDialogOpen] = useState(false);
  const [newNavbar, setNewNavbar] = useState({
    label: '',
    url: '',
    orderIndex: 0,
    isActive: true,
  });
  const [editingNavbar, setEditingNavbar] = useState(null);
  const [savingNavbar, setSavingNavbar] = useState(false);
  // Use React Query for admin profile to sync with login page
  const { data: adminProfileData, isLoading: profileLoading } = useQuery({
    queryKey: ['adminProfile'],
    queryFn: getAdminProfile,
    staleTime: 0, // Always fetch fresh data
    refetchOnWindowFocus: true,
    retry: 1,
  });

  // Keep local state for backward compatibility with existing code
  const [adminProfile, setAdminProfile] = useState(null);
  const [changePasswordDialogOpen, setChangePasswordDialogOpen] = useState(false);
  const [passwordData, setPasswordData] = useState({
    currentPassword: '',
    newPassword: '',
    confirmPassword: '',
  });
  const [changingPassword, setChangingPassword] = useState(false);
  const [showUserMenu, setShowUserMenu] = useState(false);
  const [changeEmailDialogOpen, setChangeEmailDialogOpen] = useState(false);
  const [emailData, setEmailData] = useState({
    email: '',
    password: '',
  });
  const [changingEmail, setChangingEmail] = useState(false);
  const [uploadingPhoto, setUploadingPhoto] = useState(false);
  const [deletingPhoto, setDeletingPhoto] = useState(false);

  // Initial data fetch and polling setup
  useEffect(() => {
    if (isAuthenticated) {
      fetchData(true); // Initial load
      fetchNotifications();
      fetchUpdates(true); // Fetch updates for overview with loading
      
      // Poll for new data every 10 seconds (silent update, no loading state)
      const interval = setInterval(() => {
        fetchData(false); // Background update, no loading
        fetchNotifications();
        fetchUpdates(false); // Background update, no loading
      }, 10000);
      return () => clearInterval(interval);
    }
  }, [isAuthenticated]);

  // Fetch pricings when pricing section is active
  useEffect(() => {
    if (isAuthenticated && activeSection === 'pricing') {
      fetchPricings();
    }
  }, [isAuthenticated, activeSection]);

  // Fetch updates when updates section is active
  useEffect(() => {
    if (isAuthenticated && activeSection === 'updates') {
      fetchUpdates(true);
    }
  }, [isAuthenticated, activeSection]);

  // Sync React Query admin profile data to local state
  useEffect(() => {
    if (adminProfileData) {
      setAdminProfile(adminProfileData);
    } else if (!profileLoading) {
      // Set default if no data and not loading
      setAdminProfile({
        id: 'admin001',
        email: 'codeentrasocial10@gmail.com',
        profilePhoto: null,
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString(),
      });
    }
  }, [adminProfileData, profileLoading]);

  // Fetch conversations when chatbot section is active
  useEffect(() => {
    if (isAuthenticated && activeSection === 'chatbot') {
      fetchConversations();
    }
    if (isAuthenticated && activeSection === 'products') {
      fetchProducts();
    }
    if (isAuthenticated && activeSection === 'services') {
      fetchServices();
    }
    if (isAuthenticated && activeSection === 'testimonials') {
      fetchTestimonials();
    }
    if (isAuthenticated && activeSection === 'navbar') {
      fetchNavbar();
    }
    if (isAuthenticated && activeSection === 'contactInfo') {
      fetchContactInfo();
    }
    if (isAuthenticated && activeSection === 'profile') {
      fetchAdminProfile();
    }
    // Fetch all data for overview section
    if (isAuthenticated && activeSection === 'overview') {
      fetchPricings();
      fetchConversations();
      fetchProducts();
      fetchServices();
      fetchTestimonials();
      fetchContactInfo();
      fetchFooter();
      fetchNavbar();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [isAuthenticated, activeSection]);

  const fetchUpdates = async (showLoading = false) => {
    try {
      if (showLoading) {
        setUpdatesLoading(true);
      }
      const response = await getAllUpdatesAdmin();
      setUpdates(response?.data || []);
    } catch (error) {
      console.error('Error fetching updates:', error);
    } finally {
      if (showLoading) {
        setUpdatesLoading(false);
      }
    }
  };

  const handleAddUpdate = async () => {
    if (!newUpdate.title || !newUpdate.description) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingUpdate(true);
      await createUpdate(newUpdate);
      await fetchUpdates();
      setAddUpdateDialogOpen(false);
      setNewUpdate({ title: '', description: '', type: 'announcement', isActive: true });
      toast.success('Update created successfully!');
    } catch (error) {
      console.error('Error creating update:', error);
      toast.error(error.message || 'Failed to create update. Please try again.');
    } finally {
      setSavingUpdate(false);
    }
  };

  const handleEditUpdate = async () => {
    if (!editingUpdate || !editingUpdate.title || !editingUpdate.description) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingUpdate(true);
      await updateUpdate(editingUpdate.id, {
        title: editingUpdate.title,
        description: editingUpdate.description,
        type: editingUpdate.type,
        isActive: editingUpdate.isActive,
      });
      await fetchUpdates();
      setEditUpdateDialogOpen(false);
      setEditingUpdate(null);
      toast.success('Update updated successfully!');
    } catch (error) {
      console.error('Error updating update:', error);
      toast.error(error.message || 'Failed to update update. Please try again.');
    } finally {
      setSavingUpdate(false);
    }
  };

  const handleDeleteUpdateClick = (updateId) => {
    setItemToDelete({ type: 'update', id: updateId });
    setDeleteDialogOpen(true);
  };

  const handleEditUpdateClick = (update) => {
    setEditingUpdate({ ...update });
    setEditUpdateDialogOpen(true);
  };

  const fetchConversations = async (showLoading = true) => {
    try {
      if (showLoading) {
        setConversationsLoading(true);
      }
      const response = await getAllQuestionsAdmin();
      console.log('Fetch conversations response:', response);
      
      // Handle both direct array and nested data structure
      const conversationsData = Array.isArray(response) 
        ? response 
        : (response?.data || []);
      
      console.log('Conversations data:', conversationsData);
      console.log('Setting conversations state with', conversationsData.length, 'items');
      
      // Force state update by creating new array reference
      setConversations([...conversationsData]);
    } catch (error) {
      console.error('Error fetching conversations:', error);
      toast.error('Failed to fetch chatbot questions');
    } finally {
      if (showLoading) {
        setConversationsLoading(false);
      }
    }
  };

  const handleAddQuestion = async () => {
    if (!newQuestion.question || !newQuestion.options || newQuestion.options.length === 0) {
      toast.error('Please fill in question and at least one option');
      return;
    }

    // Validate options
    const invalidOptions = newQuestion.options.filter(opt => !opt.option || !opt.answer);
    if (invalidOptions.length > 0) {
      toast.error('Please fill in all option fields');
      return;
    }

    try {
      setSavingQuestion(true);
      await createQuestion(newQuestion);
      
      // Invalidate React Query cache for chatbot questions
      queryClient.invalidateQueries({ queryKey: ['initialQuestion'] });
      queryClient.invalidateQueries({ queryKey: ['question'] });
      
      await fetchConversations();
      setAddQuestionDialogOpen(false);
      setNewQuestion({ 
        question: '', 
        options: [{ option: '', answer: '', nextQuestionId: null }], 
        isActive: true, 
        isInitial: false, 
        orderIndex: 0 
      });
      toast.success('Question created successfully!');
    } catch (error) {
      console.error('Error creating question:', error);
      toast.error(error.message || 'Failed to create question. Please try again.');
    } finally {
      setSavingQuestion(false);
    }
  };

  const handleEditQuestion = async () => {
    if (!editingQuestion || !editingQuestion.question || !editingQuestion.options || editingQuestion.options.length === 0) {
      toast.error('Please fill in question and at least one option');
      return;
    }

    // Validate options
    const invalidOptions = editingQuestion.options.filter(opt => !opt.option || !opt.answer);
    if (invalidOptions.length > 0) {
      toast.error('Please fill in all option fields');
      return;
    }

    try {
      setSavingQuestion(true);
      console.log('Updating question:', editingQuestion.id, {
        question: editingQuestion.question,
        options: editingQuestion.options,
        isActive: editingQuestion.isActive,
        isInitial: editingQuestion.isInitial,
        orderIndex: editingQuestion.orderIndex,
      });
      
      // Ensure options is a proper array
      const optionsToSend = Array.isArray(editingQuestion.options) 
        ? editingQuestion.options.map(opt => ({
            option: opt.option || '',
            answer: opt.answer || '',
            nextQuestionId: opt.nextQuestionId || null
          }))
        : [];
      
      console.log('Options to send:', optionsToSend);
      
      const response = await updateQuestion(editingQuestion.id, {
        question: editingQuestion.question,
        options: optionsToSend,
        isActive: editingQuestion.isActive,
        isInitial: editingQuestion.isInitial,
        orderIndex: editingQuestion.orderIndex,
      });
      
      console.log('Update response:', response);
      console.log('Response data:', response?.data);
      console.log('Response data options:', response?.data?.options);
      
      // Update the conversations state directly with the updated question
      if (response?.data) {
        const updatedQuestion = response.data;
        console.log('Updating state with question:', updatedQuestion.id);
        console.log('Updated question options:', JSON.stringify(updatedQuestion.options));
        
        setConversations(prev => {
          const updated = prev.map(conv => {
            if (conv.id === updatedQuestion.id) {
              console.log('Replacing conversation:', conv.id);
              console.log('Old options:', JSON.stringify(conv.options));
              console.log('New options:', JSON.stringify(updatedQuestion.options));
              
              // Create a completely new object to force React to detect the change
              return {
                ...updatedQuestion,
                options: Array.isArray(updatedQuestion.options) 
                  ? [...updatedQuestion.options] // Create new array reference
                  : []
              };
            }
            return { ...conv }; // Create new object reference for all items
          });
          console.log('Updated conversations state directly');
          console.log('Updated conversation options:', updated.find(c => c.id === updatedQuestion.id)?.options);
          return updated;
        });
      }
      
      // Invalidate React Query cache for chatbot questions
      queryClient.invalidateQueries({ queryKey: ['initialQuestion'] });
      queryClient.invalidateQueries({ queryKey: ['question'] });
      
      // Also fetch fresh data from server to ensure consistency
      setTimeout(async () => {
        console.log('Refreshing conversations after update...');
        await fetchConversations(false); // Don't show loading spinner
        console.log('Conversations refreshed');
      }, 500);
      
      setEditQuestionDialogOpen(false);
      setEditingQuestion(null);
      toast.success('Question updated successfully!');
    } catch (error) {
      console.error('Error updating question:', error);
      console.error('Error details:', {
        message: error.message,
        stack: error.stack,
        response: error.response
      });
      toast.error(error.message || 'Failed to update question. Please try again.');
    } finally {
      setSavingQuestion(false);
    }
  };

  const handleEditQuestionClick = (question) => {
    setEditingQuestion({ ...question });
    setEditQuestionDialogOpen(true);
  };

  const handleDeleteQuestionClick = (questionId) => {
    setItemToDelete({ type: 'question', id: questionId });
    setDeleteDialogOpen(true);
  };

  const addOption = (isEdit = false) => {
    if (isEdit && editingQuestion) {
      setEditingQuestion({
        ...editingQuestion,
        options: [...editingQuestion.options, { option: '', answer: '', nextQuestionId: null }]
      });
    } else {
      setNewQuestion({
        ...newQuestion,
        options: [...newQuestion.options, { option: '', answer: '', nextQuestionId: null }]
      });
    }
  };

  const removeOption = (index, isEdit = false) => {
    if (isEdit && editingQuestion) {
      const newOptions = editingQuestion.options.filter((_, i) => i !== index);
      setEditingQuestion({ ...editingQuestion, options: newOptions });
    } else {
      const newOptions = newQuestion.options.filter((_, i) => i !== index);
      setNewQuestion({ ...newQuestion, options: newOptions });
    }
  };

  const updateOption = (index, field, value, isEdit = false) => {
    if (isEdit && editingQuestion) {
      const newOptions = [...editingQuestion.options];
      newOptions[index] = { ...newOptions[index], [field]: value };
      console.log('Updating option:', { index, field, value, newOptions });
      setEditingQuestion({ ...editingQuestion, options: newOptions });
    } else {
      const newOptions = [...newQuestion.options];
      newOptions[index] = { ...newOptions[index], [field]: value };
      setNewQuestion({ ...newQuestion, options: newOptions });
    }
  };

  // Products Management Functions
  const fetchProducts = async () => {
    try {
      setProductsLoading(true);
      const response = await getAllProductsAdmin();
      console.log('Products API Response:', response);
      // Handle both direct array and nested data structure
      const productsData = Array.isArray(response) ? response : (response?.data || []);
      console.log('Products Data:', productsData);
      setProducts(productsData);
    } catch (error) {
      console.error('Error fetching products:', error);
      toast.error('Failed to fetch products');
    } finally {
      setProductsLoading(false);
    }
  };

  const handleAddProduct = async () => {
    if (!newProduct.name || !newProduct.description || !newProduct.url) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingProduct(true);
      await createProduct(newProduct);
      await fetchProducts();
      setAddProductDialogOpen(false);
      setNewProduct({ name: '', description: '', url: '', icon: 'Sparkles', features: [], isActive: true, orderIndex: 0 });
      setNewFeature('');
      toast.success('Product created successfully!');
    } catch (error) {
      console.error('Error creating product:', error);
      toast.error(error.message || 'Failed to create product. Please try again.');
    } finally {
      setSavingProduct(false);
    }
  };

  const handleEditProductClick = (product) => {
    setEditingProduct({ ...product });
    setEditProductDialogOpen(true);
  };

  const handleUpdateProduct = async () => {
    if (!editingProduct || !editingProduct.name || !editingProduct.description || !editingProduct.url) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingProduct(true);
      await updateProduct(editingProduct.id, editingProduct);
      await fetchProducts();
      setEditProductDialogOpen(false);
      setEditingProduct(null);
      toast.success('Product updated successfully!');
    } catch (error) {
      console.error('Error updating product:', error);
      toast.error(error.message || 'Failed to update product. Please try again.');
    } finally {
      setSavingProduct(false);
    }
  };

  const handleDeleteProductClick = (productId) => {
    setItemToDelete({ type: 'product', id: productId });
    setDeleteDialogOpen(true);
  };

  // Services functions
  const fetchServices = async () => {
    try {
      setServicesLoading(true);
      const response = await getAllServicesAdmin();
      const servicesData = Array.isArray(response) ? response : (response?.data || []);
      setServices(servicesData);
    } catch (error) {
      console.error('Error fetching services:', error);
      toast.error('Failed to fetch services');
    } finally {
      setServicesLoading(false);
    }
  };

  const handleAddService = async () => {
    if (!newService.title || !newService.description) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingService(true);
      await createService(newService);
      await fetchServices();
      setAddServiceDialogOpen(false);
      setNewService({ title: '', description: '', fullDescription: '', icon: 'code', isActive: true, orderIndex: 0 });
      toast.success('Service created successfully!');
    } catch (error) {
      console.error('Error creating service:', error);
      toast.error(error.message || 'Failed to create service');
    } finally {
      setSavingService(false);
    }
  };

  const handleEditService = async () => {
    if (!editingService?.title || !editingService?.description) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingService(true);
      await updateService(editingService.id, editingService);
      await fetchServices();
      setEditServiceDialogOpen(false);
      setEditingService(null);
      toast.success('Service updated successfully!');
    } catch (error) {
      console.error('Error updating service:', error);
      toast.error(error.message || 'Failed to update service');
    } finally {
      setSavingService(false);
    }
  };

  const handleEditServiceClick = (service) => {
    setEditingService({ ...service });
    setEditServiceDialogOpen(true);
  };

  const handleDeleteServiceClick = (serviceId) => {
    setItemToDelete({ type: 'service', id: serviceId });
    setDeleteDialogOpen(true);
  };

  // Testimonials functions
  const fetchTestimonials = async () => {
    try {
      setTestimonialsLoading(true);
      console.log('Fetching testimonials...');
      const response = await getAllTestimonialsAdmin();
      console.log('Testimonials API Response:', response);
      // Handle both direct array and nested data structure
      const testimonialsData = Array.isArray(response) ? response : (response?.data || []);
      console.log('Testimonials Data:', testimonialsData);
      setTestimonials(testimonialsData);
    } catch (error) {
      console.error('Error fetching testimonials:', error);
      toast.error('Failed to fetch testimonials');
      setTestimonials([]); // Set empty array on error
    } finally {
      setTestimonialsLoading(false);
    }
  };

  const handleAddTestimonial = async () => {
    if (!newTestimonial.quote || !newTestimonial.name || !newTestimonial.title || !newTestimonial.company) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingTestimonial(true);
      await createTestimonial(newTestimonial);
      await fetchTestimonials();
      setAddTestimonialDialogOpen(false);
      setNewTestimonial({ quote: '', name: '', title: '', company: '', rating: 5, isActive: true, orderIndex: 0 });
      toast.success('Testimonial created successfully!');
    } catch (error) {
      console.error('Error creating testimonial:', error);
      toast.error(error.message || 'Failed to create testimonial');
    } finally {
      setSavingTestimonial(false);
    }
  };

  const handleEditTestimonial = async () => {
    if (!editingTestimonial?.quote || !editingTestimonial?.name || !editingTestimonial?.title || !editingTestimonial?.company) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingTestimonial(true);
      await updateTestimonial(editingTestimonial.id, editingTestimonial);
      await fetchTestimonials();
      setEditTestimonialDialogOpen(false);
      setEditingTestimonial(null);
      toast.success('Testimonial updated successfully!');
    } catch (error) {
      console.error('Error updating testimonial:', error);
      toast.error(error.message || 'Failed to update testimonial');
    } finally {
      setSavingTestimonial(false);
    }
  };

  const handleEditTestimonialClick = (testimonial) => {
    setEditingTestimonial({ ...testimonial });
    setEditTestimonialDialogOpen(true);
  };

  const handleDeleteTestimonialClick = (testimonialId) => {
    setItemToDelete({ type: 'testimonial', id: testimonialId });
    setDeleteDialogOpen(true);
  };

  const fetchContactInfo = async () => {
    try {
      setContactInfoLoading(true);
      const response = await getAllContactInfoAdmin();
      const contactInfoData = Array.isArray(response) ? response : (response?.data || []);
      setContactInfo(contactInfoData);
    } catch (error) {
      console.error('Error fetching contact info:', error);
      toast.error('Failed to fetch contact info');
      setContactInfo([]);
    } finally {
      setContactInfoLoading(false);
    }
  };

  const handleAddContactInfo = async () => {
    if (!newContactInfo.type || !newContactInfo.label || !newContactInfo.value) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingContactInfo(true);
      await createContactInfo(newContactInfo);
      await fetchContactInfo();
      setAddContactInfoDialogOpen(false);
      setNewContactInfo({
        type: 'office',
        label: '',
        value: '',
        orderIndex: 0,
        isActive: true,
      });
      // Invalidate React Query cache so website updates
      await queryClient.invalidateQueries({ queryKey: ['contactInfo'] });
      toast.success('Contact information created successfully!');
    } catch (error) {
      console.error('Error creating contact info:', error);
      toast.error(error.message || 'Failed to create contact information');
    } finally {
      setSavingContactInfo(false);
    }
  };

  const handleEditContactInfoClick = (contactInfoItem) => {
    setEditingContactInfo({ ...contactInfoItem });
    setEditContactInfoDialogOpen(true);
  };

  const handleEditContactInfo = async () => {
    if (!editingContactInfo?.type || !editingContactInfo?.label || !editingContactInfo?.value) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingContactInfo(true);
      // Only send the fields that should be updated
      const updateData = {
        type: editingContactInfo.type,
        label: editingContactInfo.label,
        value: editingContactInfo.value,
        orderIndex: editingContactInfo.orderIndex || 0,
        isActive: editingContactInfo.isActive !== undefined ? editingContactInfo.isActive : true,
      };
      
      console.log('Updating contact info:', editingContactInfo.id, updateData);
      const response = await updateContactInfo(editingContactInfo.id, updateData);
      console.log('Update response:', response);
      
      // Invalidate React Query cache so website updates
      queryClient.invalidateQueries({ queryKey: ['contactInfo'] });
      
      await fetchContactInfo();
      setEditContactInfoDialogOpen(false);
      setEditingContactInfo(null);
      toast.success('Contact information updated successfully!');
    } catch (error) {
      console.error('Error updating contact info:', error);
      toast.error(error.message || 'Failed to update contact information');
    } finally {
      setSavingContactInfo(false);
    }
  };

  const handleDeleteContactInfoClick = (contactInfoId) => {
    setItemToDelete({ type: 'contactInfo', id: contactInfoId });
    setDeleteDialogOpen(true);
  };

  const fetchFooter = async () => {
    try {
      setFooterLoading(true);
      const response = await getAllFooterAdmin();
      const footerData = Array.isArray(response) ? response : (response?.data || []);
      setFooter(footerData);
    } catch (error) {
      console.error('Error fetching footer:', error);
      toast.error('Failed to fetch footer');
      setFooter([]);
    } finally {
      setFooterLoading(false);
    }
  };

  const handleAddFooter = async () => {
    if (!newFooter.section) {
      toast.error('Please select a section');
      return;
    }

    try {
      setSavingFooter(true);
      await createFooter(newFooter);
      await fetchFooter();
      setAddFooterDialogOpen(false);
      setNewFooter({
        section: 'company',
        title: '',
        content: '',
        url: '',
        icon: '',
        orderIndex: 0,
        isActive: true,
      });
      // Invalidate React Query cache so website updates
      queryClient.invalidateQueries({ queryKey: ['footer'] });
      toast.success('Footer item created successfully!');
    } catch (error) {
      console.error('Error creating footer item:', error);
      toast.error(error.message || 'Failed to create footer item');
    } finally {
      setSavingFooter(false);
    }
  };

  const handleEditFooterClick = (footerItem) => {
    setEditingFooter({ ...footerItem });
    setEditFooterDialogOpen(true);
  };

  const handleEditFooter = async () => {
    if (!editingFooter?.section) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingFooter(true);
      const updateData = {
        section: editingFooter.section,
        title: editingFooter.title || null,
        content: editingFooter.content || null,
        url: editingFooter.url || null,
        icon: editingFooter.icon || null,
        orderIndex: editingFooter.orderIndex || 0,
        isActive: editingFooter.isActive !== undefined ? editingFooter.isActive : true,
      };
      
      console.log('Updating footer item:', editingFooter.id, updateData);
      const response = await updateFooter(editingFooter.id, updateData);
      console.log('Update response:', response);
      
      // Invalidate React Query cache so website updates immediately
      await queryClient.invalidateQueries({ queryKey: ['footer'] });
      console.log('Cache invalidated for footer');
      
      // Also refetch to ensure dashboard shows updated data
      await fetchFooter();
      
      setEditFooterDialogOpen(false);
      setEditingFooter(null);
      toast.success('Footer item updated successfully! Website will refresh automatically.');
    } catch (error) {
      console.error('Error updating footer item:', error);
      toast.error(error.message || 'Failed to update footer item');
    } finally {
      setSavingFooter(false);
    }
  };

  const handleDeleteFooterClick = (footerId) => {
    setItemToDelete({ type: 'footer', id: footerId });
    setDeleteDialogOpen(true);
  };

  const fetchNavbar = async () => {
    try {
      setNavbarLoading(true);
      const response = await getAllNavbarAdmin();
      const navbarData = Array.isArray(response) ? response : (response?.data || []);
      setNavbar(navbarData);
    } catch (error) {
      console.error('Error fetching navbar:', error);
      toast.error('Failed to fetch navbar');
      setNavbar([]);
    } finally {
      setNavbarLoading(false);
    }
  };

  const handleAddNavbar = async () => {
    if (!newNavbar.label || !newNavbar.url) {
      toast.error('Please fill in label and URL');
      return;
    }

    try {
      setSavingNavbar(true);
      await createNavbar(newNavbar);
      await fetchNavbar();
      setAddNavbarDialogOpen(false);
      setNewNavbar({
        label: '',
        url: '',
        orderIndex: 0,
        isActive: true,
      });
      // Invalidate React Query cache so website updates
      await queryClient.invalidateQueries({ queryKey: ['navbar'] });
      toast.success('Navbar item created successfully!');
    } catch (error) {
      console.error('Error creating navbar item:', error);
      toast.error(error.message || 'Failed to create navbar item');
    } finally {
      setSavingNavbar(false);
    }
  };

  const handleEditNavbarClick = (navbarItem) => {
    setEditingNavbar({ ...navbarItem });
    setEditNavbarDialogOpen(true);
  };

  const handleEditNavbar = async () => {
    if (!editingNavbar?.label || !editingNavbar?.url) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      setSavingNavbar(true);
      const updateData = {
        label: editingNavbar.label,
        url: editingNavbar.url,
        orderIndex: editingNavbar.orderIndex || 0,
        isActive: editingNavbar.isActive !== undefined ? editingNavbar.isActive : true,
      };
      
      console.log('Updating navbar item:', editingNavbar.id, updateData);
      const response = await updateNavbar(editingNavbar.id, updateData);
      console.log('Update response:', response);
      
      // Invalidate React Query cache so website updates immediately
      await queryClient.invalidateQueries({ queryKey: ['navbar'] });
      console.log('Cache invalidated for navbar');
      
      // Also refetch to ensure dashboard shows updated data
      await fetchNavbar();
      
      setEditNavbarDialogOpen(false);
      setEditingNavbar(null);
      toast.success('Navbar item updated successfully! Website will refresh automatically.');
    } catch (error) {
      console.error('Error updating navbar item:', error);
      toast.error(error.message || 'Failed to update navbar item');
    } finally {
      setSavingNavbar(false);
    }
  };

  const handleDeleteNavbarClick = (navbarId) => {
    setItemToDelete({ type: 'navbar', id: navbarId });
    setDeleteDialogOpen(true);
  };

  const fetchAdminProfile = async () => {
    // Invalidate and refetch React Query cache (this will update both login page and dashboard)
    await queryClient.invalidateQueries({ queryKey: ['adminProfile'] });
    await queryClient.refetchQueries({ queryKey: ['adminProfile'] });
  };

  const handleChangePassword = async () => {
    if (!passwordData.currentPassword || !passwordData.newPassword || !passwordData.confirmPassword) {
      toast.error('Please fill in all password fields');
      return;
    }

    if (passwordData.newPassword !== passwordData.confirmPassword) {
      toast.error('New password and confirm password do not match');
      return;
    }

    if (passwordData.newPassword.length < 6) {
      toast.error('New password must be at least 6 characters long');
      return;
    }

    try {
      setChangingPassword(true);
      await changePassword(
        passwordData.currentPassword,
        passwordData.newPassword,
        passwordData.confirmPassword
      );
      toast.success('Password changed successfully!');
      setChangePasswordDialogOpen(false);
      setPasswordData({
        currentPassword: '',
        newPassword: '',
        confirmPassword: '',
      });
    } catch (error) {
      console.error('Error changing password:', error);
      toast.error(error.message || 'Failed to change password');
    } finally {
      setChangingPassword(false);
    }
  };

  const handleChangeEmail = async () => {
    if (!emailData.email || !emailData.password) {
      toast.error('Please fill in email and password');
      return;
    }

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(emailData.email)) {
      toast.error('Please enter a valid email address');
      return;
    }

    try {
      setChangingEmail(true);
      const response = await updateAdminEmail(emailData.email, emailData.password);
      if (response.success) {
        toast.success('Email updated successfully!');
        setChangeEmailDialogOpen(false);
        setEmailData({
          email: '',
          password: '',
        });
        // Invalidate and refetch React Query cache
        await queryClient.invalidateQueries({ queryKey: ['adminProfile'] });
        await queryClient.refetchQueries({ queryKey: ['adminProfile'] });
      }
    } catch (error) {
      console.error('Error changing email:', error);
      toast.error(error.message || 'Failed to update email');
    } finally {
      setChangingEmail(false);
    }
  };

  const handlePhotoUpload = async (event) => {
    const file = event.target.files[0];
    if (!file) return;

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      toast.error('Please upload a valid image file (JPEG, PNG, GIF, or WebP)');
      return;
    }

    // Validate file size (5MB)
    if (file.size > 5 * 1024 * 1024) {
      toast.error('Image size must be less than 5MB');
      return;
    }

    try {
      setUploadingPhoto(true);
      const response = await uploadProfilePhoto(file);
      if (response.success) {
        toast.success('Profile photo uploaded successfully!');
        // Invalidate and refetch React Query cache so all components update
        await queryClient.invalidateQueries({ queryKey: ['adminProfile'] });
        await queryClient.refetchQueries({ queryKey: ['adminProfile'] });
      }
    } catch (error) {
      console.error('Error uploading photo:', error);
      toast.error(error.message || 'Failed to upload photo');
    } finally {
      setUploadingPhoto(false);
      // Reset file input
      event.target.value = '';
    }
  };

  const handleDeletePhoto = async () => {
    if (!adminProfile?.profilePhoto) {
      toast.error('No profile photo to delete');
      return;
    }

    if (!window.confirm('Are you sure you want to delete your profile photo?')) {
      return;
    }

    try {
      setDeletingPhoto(true);
      const response = await deleteProfilePhoto();
      if (response.success) {
        toast.success('Profile photo deleted successfully!');
        // Invalidate and refetch React Query cache so all components update
        await queryClient.invalidateQueries({ queryKey: ['adminProfile'] });
        await queryClient.refetchQueries({ queryKey: ['adminProfile'] });
      }
    } catch (error) {
      console.error('Error deleting photo:', error);
      toast.error(error.message || 'Failed to delete photo');
    } finally {
      setDeletingPhoto(false);
    }
  };

  const addFeature = (isEdit = false) => {
    if (newFeature.trim()) {
      if (isEdit && editingProduct) {
        setEditingProduct({ ...editingProduct, features: [...editingProduct.features, newFeature.trim()] });
      } else {
        setNewProduct({ ...newProduct, features: [...newProduct.features, newFeature.trim()] });
      }
      setNewFeature('');
    }
  };

  const removeFeature = (index, isEdit = false) => {
    if (isEdit && editingProduct) {
      const newFeatures = editingProduct.features.filter((_, i) => i !== index);
      setEditingProduct({ ...editingProduct, features: newFeatures });
    } else {
      const newFeatures = newProduct.features.filter((_, i) => i !== index);
      setNewProduct({ ...newProduct, features: newFeatures });
    }
  };

  const fetchData = async (showLoading = false) => {
    try {
      if (showLoading) {
        setLoading(true);
      }
      const [internshipsRes, contactsRes] = await Promise.all([
        getAllInternships(),
        getAllContacts()
      ]);
      
      setInternships(internshipsRes?.data || []);
      setContacts(contactsRes?.data || []);
      
      if (showLoading) {
        setInitialLoad(false);
      }
    } catch (error) {
      console.error('Error fetching data:', error);
    } finally {
      if (showLoading) {
        setLoading(false);
      }
    }
  };

  const fetchNotifications = async () => {
    try {
      const response = await getAllNotifications();
      setNotifications(response?.data || []);
    } catch (error) {
      console.error('Error fetching notifications:', error);
    }
  };

  const fetchPricings = async () => {
    try {
      setPricingLoading(true);
      const response = await getAllPricingsAdmin();
      setPricings(response?.data || []);
    } catch (error) {
      console.error('Error fetching pricings:', error);
    } finally {
      setPricingLoading(false);
    }
  };

  const handlePricingChange = (duration, newPrice) => {
    setPricings(prev => prev.map(p => 
      p.duration === duration ? { ...p, price: parseFloat(newPrice) } : p
    ));
  };

  const handleSavePricings = async () => {
    try {
      setPricingLoading(true);
      const pricingsToUpdate = pricings.map(p => ({
        duration: p.duration,
        price: parseFloat(p.price)
      }));
      await updateMultiplePricings(pricingsToUpdate);
      await fetchPricings();
      toast.success('Pricings updated successfully!');
    } catch (error) {
      console.error('Error updating pricings:', error);
      toast.error('Failed to update pricings. Please try again.');
    } finally {
      setPricingLoading(false);
    }
  };

  const handleAddPricing = async () => {
    if (!newPricing.duration || !newPricing.price) {
      toast.error('Please fill in all fields');
      return;
    }

    const duration = parseInt(newPricing.duration);
    const price = parseFloat(newPricing.price);

    if (isNaN(duration) || duration < 1 || duration > 12) {
      toast.error('Duration must be between 1 and 12 months');
      return;
    }

    if (isNaN(price) || price < 0) {
      toast.error('Price must be a valid positive number');
      return;
    }

    // Check if duration already exists
    const existingPricing = pricings.find(p => p.duration === duration);
    if (existingPricing) {
      toast.error(`Pricing for ${duration} month(s) already exists. Please update it instead.`);
      return;
    }

    try {
      setAddingPricing(true);
      const apiUrl = import.meta.env.VITE_API_URL || 'http://localhost:4000';
      const response = await fetch(`${apiUrl}/api/v1/pricing/admin/${duration}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ duration, price }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({ message: 'Failed to add pricing' }));
        throw new Error(errorData.message || 'Failed to add pricing');
      }

      await fetchPricings();
      setAddPricingDialogOpen(false);
      setNewPricing({ duration: '', price: '' });
      toast.success('Pricing added successfully!');
    } catch (error) {
      console.error('Error adding pricing:', error);
      toast.error(error.message || 'Failed to add pricing. Please try again.');
    } finally {
      setAddingPricing(false);
    }
  };

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const handleDeleteClick = (type, id) => {
    setItemToDelete({ type, id });
    setDeleteDialogOpen(true);
  };

  const handleDeleteConfirm = async () => {
    try {
      if (itemToDelete.type === 'contact') {
        await deleteContact(itemToDelete.id);
        await fetchData(false); // Silent update after delete
        toast.success("Contact deleted successfully!");
      } else if (itemToDelete.type === 'internship') {
        await deleteInternship(itemToDelete.id);
        await fetchData(false); // Silent update after delete
        toast.success("Internship application deleted successfully!");
      } else if (itemToDelete.type === 'pricing') {
        await deletePricing(itemToDelete.id);
        await fetchPricings();
        toast.success("Pricing deleted successfully!");
      } else if (itemToDelete.type === 'update') {
        await deleteUpdate(itemToDelete.id);
        await fetchUpdates();
        toast.success("Update deleted successfully!");
      } else if (itemToDelete.type === 'question') {
        await deleteQuestion(itemToDelete.id);
        
        // Invalidate React Query cache for chatbot questions
        queryClient.invalidateQueries({ queryKey: ['initialQuestion'] });
        queryClient.invalidateQueries({ queryKey: ['question'] });
        
        await fetchConversations();
        toast.success("Chatbot question deleted successfully!");
      } else if (itemToDelete.type === 'product') {
        await deleteProduct(itemToDelete.id);
        await fetchProducts();
        toast.success("Product deleted successfully!");
      } else if (itemToDelete.type === 'service') {
        await deleteService(itemToDelete.id);
        await fetchServices();
        toast.success("Service deleted successfully!");
      } else if (itemToDelete.type === 'testimonial') {
        await deleteTestimonial(itemToDelete.id);
        await fetchTestimonials();
        toast.success("Testimonial deleted successfully!");
      } else if (itemToDelete.type === 'contactInfo') {
        await deleteContactInfo(itemToDelete.id);
        // Invalidate React Query cache so website updates
        queryClient.invalidateQueries({ queryKey: ['contactInfo'] });
        await fetchContactInfo();
        toast.success("Contact information deleted successfully!");
      } else if (itemToDelete.type === 'footer') {
        await deleteFooter(itemToDelete.id);
        // Invalidate React Query cache so website updates
        queryClient.invalidateQueries({ queryKey: ['footer'] });
        await fetchFooter();
        toast.success("Footer item deleted successfully!");
      } else if (itemToDelete.type === 'navbar') {
        await deleteNavbar(itemToDelete.id);
        // Invalidate React Query cache so website updates
        await queryClient.invalidateQueries({ queryKey: ['navbar'] });
        await fetchNavbar();
        toast.success("Navbar item deleted successfully!");
      }
      setDeleteDialogOpen(false);
      setItemToDelete({ type: null, id: null });
    } catch (error) {
      console.error('Error deleting:', error);
      toast.error(`Failed to delete ${itemToDelete.type}. Please try again.`);
    }
  };

  const handleNotificationClick = () => {
    setShowNotifications(!showNotifications);
  };

  const handleNotificationItemClick = async (notification) => {
    // Mark as read if not already read
    if (!notification.isRead) {
      try {
        await markNotificationAsRead(notification.id);
        await fetchNotifications();
      } catch (error) {
        console.error('Error marking notification as read:', error);
      }
    }
    
    // Navigate to relevant section
    if (notification.type === 'internship') {
      setActiveSection('internships');
    } else {
      setActiveSection('contacts');
    }
    setShowNotifications(false);
  };

  const handleDeleteNotification = async (e, notificationId) => {
    e.stopPropagation();
    try {
      await deleteNotification(notificationId);
      await fetchNotifications();
    } catch (error) {
      console.error('Error deleting notification:', error);
    }
  };

  const handleClearAll = async () => {
    try {
      await clearAllNotifications();
      await fetchNotifications();
      setShowNotifications(false);
    } catch (error) {
      console.error('Error clearing notifications:', error);
    }
  };

  const unreadCount = notifications.filter(n => !n.isRead).length;

  if (!isAuthenticated) {
    return (
      <div className="min-h-screen bg-gray-900 flex items-center justify-center">
        <div className="text-white">Loading...</div>
      </div>
    );
  }

  const formatDate = (dateString) => {
    if (!dateString) return 'N/A';
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  // Calculate statistics
  const totalInternships = internships.length;
  const totalContacts = contacts.length;
  const recentInternships = internships.filter(item => {
    const date = new Date(item.createdAt);
    const daysDiff = (Date.now() - date.getTime()) / (1000 * 60 * 60 * 24);
    return daysDiff <= 7;
  }).length;
  const recentContacts = contacts.filter(item => {
    const date = new Date(item.createdAt);
    const daysDiff = (Date.now() - date.getTime()) / (1000 * 60 * 60 * 24);
    return daysDiff <= 7;
  }).length;

  return (
    <div className={`min-h-screen flex ${theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'}`}>
      {/* Sidebar */}
      <aside className={`w-64 flex flex-col h-screen fixed left-0 top-0 ${
        theme === 'dark' ? 'bg-gray-800 border-r border-gray-700' : 'bg-white border-r border-gray-200'
      }`}>
        {/* User Profile Section */}
        <div className="p-6 border-b border-gray-700 flex-shrink-0">
          <div className="flex items-center justify-between mb-4">
            {adminProfile?.profilePhoto ? (
              <img 
                src={`${apiUrlForImages}${adminProfile.profilePhoto}`} 
                alt="Admin Profile" 
                className="w-12 h-12 rounded-full object-cover border-2 border-green-500"
                onError={(e) => {
                  e.target.style.display = 'none';
                  if (e.target.nextSibling) {
                    e.target.nextSibling.style.display = 'flex';
                  }
                }}
              />
            ) : null}
            <div 
              className={`flex items-center justify-center bg-white rounded-full p-2 w-12 h-12 ${adminProfile?.profilePhoto ? 'hidden' : ''}`}
            >
              <img 
                src={logo} 
                alt="CodeEntra Logo" 
                className="h-full w-auto object-contain"
              />
            </div>
          </div>
          <div className={`text-xs mt-2 ${theme === 'dark' ? 'text-gray-400' : 'text-gray-600'}`}>Admin Panel</div>
        </div>

        {/* Theme Toggle Button */}
        <div className={`p-4 border-b flex-shrink-0 ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
          <button
            onClick={toggleTheme}
            className={`w-full flex items-center justify-between px-4 py-3 rounded-lg transition-colors ${
              theme === 'dark' 
                ? 'bg-gray-700 text-gray-300 hover:bg-gray-600' 
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            <div className="flex items-center space-x-3">
              {theme === 'dark' ? (
                <>
                  <Moon className="w-5 h-5" />
                  <span>Dark Mode</span>
                </>
              ) : (
                <>
                  <Sun className="w-5 h-5" />
                  <span>Light Mode</span>
                </>
              )}
            </div>
            <div className={`w-10 h-6 rounded-full transition-colors ${
              theme === 'dark' ? 'bg-green-600' : 'bg-green-400'
            }`}>
              <div className={`w-4 h-4 rounded-full bg-white transition-transform ${
                theme === 'dark' ? 'translate-x-5' : 'translate-x-1'
              }`} style={{ marginTop: '4px' }}></div>
            </div>
          </button>
        </div>

        {/* Navigation */}
        <nav className="flex-1 p-4 space-y-2 overflow-y-auto">
          <button
            onClick={() => setActiveSection('overview')}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'overview'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <LayoutDashboard className="w-5 h-5" />
            <span>Overview</span>
          </button>

          {/* Notifications Button */}
          <button
            onClick={handleNotificationClick}
            className="w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-gray-300 hover:bg-gray-700 relative"
          >
            <Bell className="w-5 h-5" />
            <span>Notifications</span>
            {unreadCount > 0 && (
              <span className="ml-auto bg-red-600 text-white text-xs px-2 py-1 rounded-full min-w-[20px] text-center">
                {unreadCount}
              </span>
            )}
          </button>

          <button
            onClick={() => setActiveSection('internships')}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'internships'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <FileText className="w-5 h-5" />
            <span>Internships</span>
            {totalInternships > 0 && (
              <span className="ml-auto bg-green-600 text-white text-xs px-2 py-1 rounded-full">
                {totalInternships}
              </span>
            )}
          </button>

          <button
            onClick={() => setActiveSection('contacts')}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'contacts'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <MessageSquare className="w-5 h-5" />
            <span>Contacts</span>
            {totalContacts > 0 && (
              <span className="ml-auto bg-green-600 text-white text-xs px-2 py-1 rounded-full">
                {totalContacts}
              </span>
            )}
          </button>

          <button
            onClick={() => {
              setActiveSection('pricing');
              fetchPricings();
            }}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'pricing'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Settings className="w-5 h-5" />
            <span>Pricing</span>
          </button>

          <button
            onClick={() => {
              setActiveSection('updates');
              fetchUpdates();
            }}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'updates'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <TrendingUp className="w-5 h-5" />
            <span>Updates</span>
          </button>

          {/* Chatbot Management Button */}
          <button
            onClick={() => {
              setActiveSection('chatbot');
              fetchConversations();
            }}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'chatbot'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Bot className="w-5 h-5" />
            <span>Chatbot</span>
          </button>
          <button
            onClick={() => {
              setActiveSection('products');
              fetchProducts();
            }}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'products'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Package className="w-5 h-5" />
            <span>Products</span>
          </button>
          <button
            onClick={() => {
              setActiveSection('services');
              setShowNotifications(false);
            }}
            className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'services'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Settings className="w-5 h-5" />
            <span>Services</span>
          </button>
          <button
            onClick={() => {
              setActiveSection('testimonials');
              setShowNotifications(false);
              fetchTestimonials();
            }}
            className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'testimonials'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Star className="w-5 h-5" />
            <span>Testimonials</span>
          </button>
          <button
            onClick={() => {
              setActiveSection('footer');
              setShowNotifications(false);
              fetchFooter();
            }}
            className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'footer'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <LayoutDashboard className="w-5 h-5" />
            <span>Footer</span>
          </button>
          <button
            onClick={() => {
              setActiveSection('navbar');
              setShowNotifications(false);
              fetchNavbar();
            }}
            className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'navbar'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Settings className="w-5 h-5" />
            <span>Navbar</span>
          </button>
          <button
            onClick={() => {
              setActiveSection('contactInfo');
              setShowNotifications(false);
              fetchContactInfo();
            }}
            className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
              activeSection === 'contactInfo'
                ? 'bg-green-600 text-white'
                : 'text-gray-300 hover:bg-gray-700'
            }`}
          >
            <Phone className="w-5 h-5" />
            <span>Contact Info</span>
          </button>
        </nav>

        {/* User Menu */}
        <div className={`p-4 border-t flex-shrink-0 relative ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>
          <button
            onClick={() => setShowUserMenu(!showUserMenu)}
            className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${
              theme === 'dark' 
                ? 'text-gray-300 hover:bg-gray-700' 
                : 'text-gray-700 hover:bg-gray-100'
            }`}
          >
            {adminProfile?.profilePhoto ? (
              <img 
                src={`${apiUrlForImages}${adminProfile.profilePhoto}`} 
                alt="Admin" 
                className="w-5 h-5 rounded-full object-cover border border-green-500"
                onError={(e) => {
                  e.target.style.display = 'none';
                  if (e.target.nextSibling) {
                    e.target.nextSibling.style.display = 'block';
                  }
                }}
              />
            ) : (
              <UserCircle className="w-5 h-5" />
            )}
            <span>Admin</span>
          </button>
          
          {/* Dropdown Menu */}
          {showUserMenu && (
            <>
              <div 
                className="fixed inset-0 z-40" 
                onClick={() => setShowUserMenu(false)}
              ></div>
              <div className={`absolute bottom-full left-0 right-0 mb-2 rounded-lg shadow-xl z-50 overflow-hidden ${
                theme === 'dark' 
                  ? 'bg-gray-800 border border-gray-700' 
                  : 'bg-white border border-gray-200'
              }`}>
                <button
                  onClick={() => {
                    setActiveSection('profile');
                    setShowUserMenu(false);
                    setShowNotifications(false);
                    fetchAdminProfile();
                  }}
                  className={`w-full flex items-center space-x-3 px-4 py-3 transition-colors text-left ${
                    theme === 'dark' 
                      ? 'text-gray-300 hover:bg-gray-700' 
                      : 'text-gray-700 hover:bg-gray-100'
                  }`}
                >
                  <User className="w-5 h-5" />
                  <span>Profile</span>
                </button>
                <div className={theme === 'dark' ? 'border-t border-gray-700' : 'border-t border-gray-200'}></div>
                <button
                  onClick={() => {
                    setShowUserMenu(false);
                    handleLogout();
                  }}
                  className={`w-full flex items-center space-x-3 px-4 py-3 transition-colors text-left ${
                    theme === 'dark' 
                      ? 'text-red-400 hover:bg-red-900/20' 
                      : 'text-red-600 hover:bg-red-50'
                  }`}
                >
                  <LogOut className="w-5 h-5" />
                  <span>Logout</span>
                </button>
              </div>
            </>
          )}
        </div>
      </aside>

      {/* Notifications Dropdown */}
      {showNotifications && (
        <>
          <div 
            className="fixed inset-0 z-40" 
            onClick={() => setShowNotifications(false)}
          />
          <div className="fixed top-16 right-4 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl z-50 max-h-96 overflow-y-auto">
            <div className="p-4 border-b border-gray-700 flex items-center justify-between">
              <h3 className="text-white font-semibold">Notifications</h3>
              <div className="flex items-center space-x-2">
                {notifications.length > 0 && (
                  <button
                    onClick={handleClearAll}
                    className="text-xs text-gray-400 hover:text-red-400 transition-colors"
                    title="Clear all"
                  >
                    Clear All
                  </button>
                )}
                <button
                  onClick={() => setShowNotifications(false)}
                  className="text-gray-400 hover:text-white"
                >
                  <X className="w-5 h-5" />
                </button>
              </div>
            </div>
            <div className="divide-y divide-gray-700">
              {notifications.length === 0 ? (
                <div className={`p-4 text-center ${
                  theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                }`}>No notifications</div>
              ) : (
                notifications.map((notification) => {
                  const isRead = notification.isRead;
                  return (
                    <div
                      key={notification.id}
                      onClick={() => handleNotificationItemClick(notification)}
                      className={`p-4 cursor-pointer transition-colors relative group ${
                        theme === 'dark'
                          ? isRead 
                            ? 'bg-gray-800 hover:bg-gray-700' 
                            : 'bg-gray-700 hover:bg-gray-600'
                          : isRead
                            ? 'bg-gray-50 hover:bg-gray-100'
                            : 'bg-gray-100 hover:bg-gray-200'
                      }`}
                    >
                      <div className="flex items-start space-x-3">
                        <div className={`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${
                          isRead ? 'bg-transparent' : 'bg-green-500'
                        }`} />
                        <div className="flex-1">
                          <p className={`text-sm ${
                            theme === 'dark'
                              ? isRead ? 'text-gray-400' : 'text-white'
                              : isRead ? 'text-gray-600' : 'text-gray-900'
                          }`}>
                            {notification.message}
                          </p>
                          <p className={`text-xs mt-1 ${
                            theme === 'dark' ? 'text-gray-500' : 'text-gray-500'
                          }`}>
                            {formatDate(new Date(notification.createdAt))}
                          </p>
                        </div>
                        <button
                          onClick={(e) => handleDeleteNotification(e, notification.id)}
                          className={`opacity-0 group-hover:opacity-100 transition-opacity ml-2 ${
                            theme === 'dark' 
                              ? 'text-gray-400 hover:text-red-400' 
                              : 'text-gray-500 hover:text-red-600'
                          }`}
                          title="Delete notification"
                        >
                          <X className="w-4 h-4" />
                        </button>
                      </div>
                    </div>
                  );
                })
              )}
            </div>
          </div>
        </>
      )}

      {/* Main Content */}
      <main className={`flex-1 overflow-y-auto ml-64 ${
        theme === 'dark' ? 'bg-gray-900' : 'bg-gray-50'
      }`}>
        <div className="p-8">
          {/* Overview Section */}
          {activeSection === 'overview' && (
            <div className="space-y-6">
              <div>
                <h1 className={`text-3xl font-bold mb-2 ${themeClasses.text.primary}`}>Dashboard Overview</h1>
                <p className={themeClasses.text.secondary}>Welcome to CodeEntra Admin Panel</p>
              </div>

              {/* KPI Cards */}
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div className={`rounded-lg p-6 border ${
                  theme === 'dark' 
                    ? 'bg-gray-800 border-gray-700' 
                    : 'bg-white border-gray-200'
                }`}>
                  <div className="flex items-center justify-between mb-4">
                    <div className={`text-sm ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>Total Internships</div>
                    <FileText className="w-5 h-5 text-green-500" />
                  </div>
                  <div className={`text-3xl font-bold mb-2 ${
                    theme === 'dark' ? 'text-white' : 'text-gray-900'
                  }`}>{totalInternships}</div>
                  <div className="flex items-center text-green-500 text-sm">
                    <TrendingUp className="w-4 h-4 mr-1" />
                    <span>+{recentInternships} this week</span>
                  </div>
                </div>

                <div className={`rounded-lg p-6 border ${
                  theme === 'dark' 
                    ? 'bg-gray-800 border-gray-700' 
                    : 'bg-white border-gray-200'
                }`}>
                  <div className="flex items-center justify-between mb-4">
                    <div className={`text-sm ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>Total Contacts</div>
                    <MessageSquare className="w-5 h-5 text-green-500" />
                  </div>
                  <div className={`text-3xl font-bold mb-2 ${
                    theme === 'dark' ? 'text-white' : 'text-gray-900'
                  }`}>{totalContacts}</div>
                  <div className="flex items-center text-green-500 text-sm">
                    <TrendingUp className="w-4 h-4 mr-1" />
                    <span>+{recentContacts} this week</span>
                  </div>
                </div>

                <div className={`rounded-lg p-6 border ${
                  theme === 'dark' 
                    ? 'bg-gray-800 border-gray-700' 
                    : 'bg-white border-gray-200'
                }`}>
                  <div className="flex items-center justify-between mb-4">
                    <div className={`text-sm ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>Recent Internships</div>
                    <Calendar className="w-5 h-5 text-green-500" />
                  </div>
                  <div className={`text-3xl font-bold mb-2 ${
                    theme === 'dark' ? 'text-white' : 'text-gray-900'
                  }`}>{recentInternships}</div>
                  <div className={`text-sm ${
                    theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                  }`}>Last 7 days</div>
                </div>

                <div className={`rounded-lg p-6 border ${
                  theme === 'dark' 
                    ? 'bg-gray-800 border-gray-700' 
                    : 'bg-white border-gray-200'
                }`}>
                  <div className="flex items-center justify-between mb-4">
                    <div className={`text-sm ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>Recent Contacts</div>
                    <Mail className="w-5 h-5 text-green-500" />
                  </div>
                  <div className={`text-3xl font-bold mb-2 ${
                    theme === 'dark' ? 'text-white' : 'text-gray-900'
                  }`}>{recentContacts}</div>
                  <div className={`text-sm ${
                    theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                  }`}>Last 7 days</div>
                </div>
              </div>

              {/* Contact Information */}
              <div className={`rounded-lg border ${
                theme === 'dark' 
                  ? 'bg-gray-800 border-gray-700' 
                  : 'bg-white border-gray-200'
              }`}>
                <div className={`p-6 border-b flex items-center justify-between ${
                  theme === 'dark' ? 'border-gray-700' : 'border-gray-200'
                }`}>
                  <div>
                    <h2 className={`text-xl font-semibold ${
                      theme === 'dark' ? 'text-white' : 'text-gray-900'
                    }`}>Contact Information</h2>
                    <p className={`text-sm mt-1 ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>Company contact details displayed on the website</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('contactInfo');
                      fetchContactInfo();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Phone className="w-4 h-4 mr-2" />
                    Manage Contact Info
                  </Button>
                </div>
                <div className="p-6">
                  {contactInfoLoading ? (
                    <div className={`text-center py-8 ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>Loading contact information...</div>
                  ) : contactInfo.length === 0 ? (
                    <div className={`text-center py-8 ${
                      theme === 'dark' ? 'text-gray-400' : 'text-gray-600'
                    }`}>
                      <Phone className={`w-12 h-12 mx-auto mb-3 ${
                        theme === 'dark' ? 'text-gray-600' : 'text-gray-400'
                      }`} />
                      <p>No contact information configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('contactInfo');
                          fetchContactInfo();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add Contact Info
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                      {contactInfo.filter(ci => ci.isActive).map((contactInfoItem) => {
                        const getIcon = () => {
                          if (contactInfoItem.type === 'office') return <MapPin className="w-5 h-5 text-white" />;
                          if (contactInfoItem.type === 'email') return <Mail className="w-5 h-5 text-white" />;
                          if (contactInfoItem.type === 'phone') return <Phone className="w-5 h-5 text-white" />;
                          return <Mail className="w-5 h-5 text-white" />;
                        };

                        const getLink = () => {
                          if (contactInfoItem.type === 'email') {
                            return <a href={`mailto:${contactInfoItem.value}`} className="text-green-400 hover:text-green-300 text-sm break-all">{contactInfoItem.value}</a>;
                          }
                          if (contactInfoItem.type === 'phone') {
                            const phoneNumber = contactInfoItem.value.replace(/\D/g, '');
                            return <a href={`tel:${phoneNumber}`} className="text-green-400 hover:text-green-300 text-sm">{contactInfoItem.value}</a>;
                          }
                          return <p className={`text-sm leading-relaxed whitespace-pre-line ${
                            theme === 'dark' ? 'text-gray-300' : 'text-gray-700'
                          }`}>{contactInfoItem.value}</p>;
                        };

                        return (
                          <div key={contactInfoItem.id} className={`rounded-lg p-6 border hover:border-green-500 transition-colors ${
                            theme === 'dark' 
                              ? 'bg-gray-700 border-gray-600' 
                              : 'bg-gray-50 border-gray-300'
                          }`}>
                            <div className="flex items-start space-x-4">
                              <div className="mt-1 bg-green-600 p-3 rounded-lg flex-shrink-0">
                                {getIcon()}
                              </div>
                              <div className="flex-1">
                                <h3 className={`font-semibold text-lg mb-2 ${
                                  theme === 'dark' ? 'text-white' : 'text-gray-900'
                                }`}>{contactInfoItem.label}</h3>
                                {getLink()}
                              </div>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  )}
                </div>
              </div>

              {/* Navbar Management Overview */}
              <div className={`rounded-lg border ${themeClasses.bg.card} ${themeClasses.border.default}`}>
                <div className={`p-6 border-b flex items-center justify-between ${themeClasses.border.default}`}>
                  <div>
                    <h2 className={`text-xl font-semibold ${themeClasses.text.primary}`}>Navigation Menu</h2>
                    <p className={`text-sm mt-1 ${themeClasses.text.secondary}`}>Manage navbar links and navigation items</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('navbar');
                      fetchNavbar();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Settings className="w-4 h-4 mr-2" />
                    Manage Navbar
                  </Button>
                </div>
                <div className="p-6">
                  {navbarLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading navbar...</div>
                  ) : navbar.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <Settings className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No navbar items configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('navbar');
                          fetchNavbar();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add Navbar Item
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                      {navbar.filter(n => n.isActive).slice(0, 9).map((navbarItem) => (
                        <div
                          key={navbarItem.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <div className="flex items-center gap-2 mb-1">
                                <span className="px-2 py-1 rounded text-xs font-medium bg-green-600 text-white">
                                  Active
                                </span>
                                <span className="text-gray-500 text-xs">Order: {navbarItem.orderIndex}</span>
                              </div>
                              <h3 className="text-white font-semibold text-sm mb-1">{navbarItem.label}</h3>
                              <a href={navbarItem.url} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:text-green-300 text-xs break-all">
                                {navbarItem.url}
                              </a>
                              <div className="text-xs text-gray-400 mt-2">
                                ID: {navbarItem.id}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {navbar.filter(n => n.isActive).length > 9 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('navbar');
                          fetchNavbar();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Navbar Items ({navbar.filter(n => n.isActive).length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Recent Activity */}
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                {/* Recent Internships */}
                <div className="bg-gray-800 rounded-lg border border-gray-700">
                  <div className="p-6 border-b border-gray-700">
                    <h2 className="text-xl font-semibold text-white">Recent Internship Applications</h2>
                  </div>
                  <div className="p-6 overflow-y-auto max-h-[500px]">
                    {loading ? (
                      <div className="text-gray-400">Loading...</div>
                    ) : internships.length === 0 ? (
                      <div className="text-gray-400">No applications yet</div>
                    ) : (
                      <div className="space-y-4">
                        {internships.map((internship) => (
                          <div key={internship.id} className="flex items-center justify-between p-4 bg-gray-700 rounded-lg">
                            <div className="flex items-center space-x-3">
                              <div className="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                {internship.fullName?.charAt(0) || 'U'}
                              </div>
                              <div>
                                <div className="text-white font-medium">{internship.fullName || internship.full_name}</div>
                                <div className="text-gray-400 text-sm">{internship.email}</div>
                              </div>
                            </div>
                            <div className="text-gray-400 text-sm">{formatDate(internship.createdAt).split(',')[0]}</div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                </div>

                {/* Recent Contacts */}
                <div className="bg-gray-800 rounded-lg border border-gray-700">
                  <div className="p-6 border-b border-gray-700">
                    <h2 className="text-xl font-semibold text-white">Recent Contact Submissions</h2>
                  </div>
                  <div className="p-6 overflow-y-auto max-h-[500px]">
                    {loading ? (
                      <div className="text-gray-400">Loading...</div>
                    ) : contacts.length === 0 ? (
                      <div className="text-gray-400">No submissions yet</div>
                    ) : (
                      <div className="space-y-4">
                        {contacts.map((contact) => (
                          <div key={contact.id} className="flex items-center justify-between p-4 bg-gray-700 rounded-lg">
                            <div className="flex items-center space-x-3">
                              <div className="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                {contact.fullname?.charAt(0) || 'U'}
                              </div>
                              <div>
                                <div className="text-white font-medium">{contact.fullname}</div>
                                <div className="text-gray-400 text-sm">{contact.subject}</div>
                              </div>
                            </div>
                            <div className="text-gray-400 text-sm">{formatDate(contact.createdAt).split(',')[0]}</div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              </div>

              {/* Active Updates & Announcements */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Active Updates & Announcements</h2>
                    <p className="text-gray-400 text-sm mt-1">Currently active updates displayed on the website</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('updates');
                      fetchUpdates();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <TrendingUp className="w-4 h-4 mr-2" />
                    Manage Updates
                  </Button>
                </div>
                <div className="p-6">
                  {updatesLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading updates...</div>
                  ) : updates.filter(u => u.isActive).length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <TrendingUp className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No active updates</p>
                      <Button
                        onClick={() => {
                          setNewUpdate({ title: '', description: '', type: 'announcement', isActive: true });
                          setAddUpdateDialogOpen(true);
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Create First Update
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {updates
                        .filter(u => u.isActive)
                        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                        .slice(0, 6)
                        .map((update) => (
                          <div
                            key={update.id}
                            className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                          >
                            <div className="flex items-start justify-between mb-2">
                              <div className="flex items-center gap-2">
                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                  update.type === 'announcement' ? 'bg-blue-600 text-white' :
                                  update.type === 'news' ? 'bg-purple-600 text-white' :
                                  update.type === 'update' ? 'bg-green-600 text-white' :
                                  'bg-gray-600 text-gray-300'
                                }`}>
                                  {update.type || 'announcement'}
                                </span>
                                <span className="px-2 py-1 rounded text-xs font-medium bg-green-600 text-white">
                                  Active
                                </span>
                              </div>
                            </div>
                            <h3 className="text-white font-semibold text-lg mb-2">{update.title}</h3>
                            <p className="text-gray-300 text-sm mb-3 line-clamp-2">{update.description}</p>
                            <div className="flex items-center justify-between text-xs text-gray-400">
                              <span>{formatDate(update.createdAt).split(',')[0]}</span>
                              <span className="text-green-400">ID: {update.id}</span>
                            </div>
                          </div>
                        ))}
                    </div>
                  )}
                  {updates.filter(u => u.isActive).length > 6 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('updates');
                          fetchUpdates();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Updates ({updates.filter(u => u.isActive).length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Pricing Management Overview */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Pricing Plans</h2>
                    <p className="text-gray-400 text-sm mt-1">Manage pricing plans and durations</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('pricing');
                      fetchPricings();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Settings className="w-4 h-4 mr-2" />
                    Manage Pricing
                  </Button>
                </div>
                <div className="p-6">
                  {pricingLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading pricing...</div>
                  ) : pricings.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <Settings className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No pricing plans configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('pricing');
                          fetchPricings();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add Pricing Plan
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                      {pricings.slice(0, 6).map((pricing) => (
                        <div
                          key={pricing.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-center justify-between mb-2">
                            <span className="text-white font-semibold text-lg">{pricing.duration}</span>
                            <span className="text-green-400 font-bold text-xl">{pricing.price}</span>
                          </div>
                          <div className="text-xs text-gray-400 mt-2">
                            ID: {pricing.id}
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {pricings.length > 6 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('pricing');
                          fetchPricings();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Pricing ({pricings.length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Chatbot Management Overview */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Chatbot Questions</h2>
                    <p className="text-gray-400 text-sm mt-1">Manage chatbot conversation flow</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('chatbot');
                      fetchConversations();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Bot className="w-4 h-4 mr-2" />
                    Manage Chatbot
                  </Button>
                </div>
                <div className="p-6">
                  {conversationsLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading conversations...</div>
                  ) : conversations.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <Bot className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No chatbot questions configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('chatbot');
                          fetchConversations();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add First Question
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {conversations.slice(0, 6).map((conversation) => (
                        <div
                          key={conversation.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <h3 className="text-white font-semibold text-sm mb-1 line-clamp-2">{conversation.question}</h3>
                              <div className="flex items-center gap-2 mt-2">
                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                  conversation.isActive ? 'bg-green-600 text-white' : 'bg-gray-600 text-gray-300'
                                }`}>
                                  {conversation.isActive ? 'Active' : 'Inactive'}
                                </span>
                                {conversation.isInitial && (
                                  <span className="px-2 py-1 rounded text-xs font-medium bg-blue-600 text-white">
                                    Initial
                                  </span>
                                )}
                              </div>
                              <div className="text-xs text-gray-400 mt-2">
                                Options: {conversation.options?.length || 0} | ID: {conversation.id}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {conversations.length > 6 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('chatbot');
                          fetchConversations();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Questions ({conversations.length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Products Management Overview */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Products</h2>
                    <p className="text-gray-400 text-sm mt-1">Manage company products and features</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('products');
                      fetchProducts();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Package className="w-4 h-4 mr-2" />
                    Manage Products
                  </Button>
                </div>
                <div className="p-6">
                  {productsLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading products...</div>
                  ) : products.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <Package className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No products configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('products');
                          fetchProducts();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add First Product
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {products.filter(p => p.isActive).slice(0, 6).map((product) => (
                        <div
                          key={product.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <h3 className="text-white font-semibold text-lg mb-1">{product.name}</h3>
                              <p className="text-gray-300 text-sm mb-2 line-clamp-2">{product.description}</p>
                              <div className="flex items-center gap-2 mb-2">
                                <span className="px-2 py-1 rounded text-xs font-medium bg-green-600 text-white">
                                  Active
                                </span>
                                <span className="text-xs text-gray-400">
                                  Features: {product.features?.length || 0}
                                </span>
                              </div>
                              <div className="text-xs text-gray-400">
                                ID: {product.id}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {products.filter(p => p.isActive).length > 6 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('products');
                          fetchProducts();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Products ({products.filter(p => p.isActive).length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Services Management Overview */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Services</h2>
                    <p className="text-gray-400 text-sm mt-1">Manage company services and offerings</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('services');
                      fetchServices();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Settings className="w-4 h-4 mr-2" />
                    Manage Services
                  </Button>
                </div>
                <div className="p-6">
                  {servicesLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading services...</div>
                  ) : services.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <Settings className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No services configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('services');
                          fetchServices();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add First Service
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {services.filter(s => s.isActive).slice(0, 6).map((service) => (
                        <div
                          key={service.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <h3 className="text-white font-semibold text-lg mb-1">{service.title}</h3>
                              <p className="text-gray-300 text-sm mb-2 line-clamp-2">{service.description}</p>
                              <div className="flex items-center gap-2">
                                <span className="px-2 py-1 rounded text-xs font-medium bg-green-600 text-white">
                                  Active
                                </span>
                              </div>
                              <div className="text-xs text-gray-400 mt-2">
                                ID: {service.id}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {services.filter(s => s.isActive).length > 6 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('services');
                          fetchServices();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Services ({services.filter(s => s.isActive).length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Testimonials Management Overview */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Testimonials</h2>
                    <p className="text-gray-400 text-sm mt-1">Manage client testimonials and reviews</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('testimonials');
                      fetchTestimonials();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <Star className="w-4 h-4 mr-2" />
                    Manage Testimonials
                  </Button>
                </div>
                <div className="p-6">
                  {testimonialsLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading testimonials...</div>
                  ) : testimonials.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <Star className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No testimonials configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('testimonials');
                          fetchTestimonials();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add First Testimonial
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      {testimonials.filter(t => t.isActive).slice(0, 6).map((testimonial) => (
                        <div
                          key={testimonial.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <p className="text-gray-300 text-sm mb-2 line-clamp-2">{testimonial.quote}</p>
                              <div className="flex items-center justify-between mb-2">
                                <div>
                                  <h3 className="text-white font-semibold">{testimonial.name}</h3>
                                  <p className="text-gray-400 text-xs">{testimonial.title} - {testimonial.company}</p>
                                </div>
                                <div className="flex items-center gap-1">
                                  {[...Array(5)].map((_, i) => (
                                    <Star
                                      key={i}
                                      className={`w-4 h-4 ${
                                        i < testimonial.rating ? 'text-yellow-400 fill-yellow-400' : 'text-gray-600'
                                      }`}
                                    />
                                  ))}
                                </div>
                              </div>
                              <div className="flex items-center gap-2">
                                <span className="px-2 py-1 rounded text-xs font-medium bg-green-600 text-white">
                                  Active
                                </span>
                                <span className="text-xs text-gray-400">
                                  ID: {testimonial.id}
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {testimonials.filter(t => t.isActive).length > 6 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('testimonials');
                          fetchTestimonials();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Testimonials ({testimonials.filter(t => t.isActive).length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>

              {/* Footer Management Overview */}
              <div className="bg-gray-800 rounded-lg border border-gray-700">
                <div className="p-6 border-b border-gray-700 flex items-center justify-between">
                  <div>
                    <h2 className="text-xl font-semibold text-white">Footer Content</h2>
                    <p className="text-gray-400 text-sm mt-1">Manage footer links, social media, and company information</p>
                  </div>
                  <Button
                    onClick={() => {
                      setActiveSection('footer');
                      fetchFooter();
                    }}
                    className="bg-green-600 hover:bg-green-700 text-white text-sm"
                  >
                    <LayoutDashboard className="w-4 h-4 mr-2" />
                    Manage Footer
                  </Button>
                </div>
                <div className="p-6">
                  {footerLoading ? (
                    <div className="text-gray-400 text-center py-8">Loading footer...</div>
                  ) : footer.length === 0 ? (
                    <div className="text-gray-400 text-center py-8">
                      <LayoutDashboard className="w-12 h-12 mx-auto mb-3 text-gray-600" />
                      <p>No footer content configured</p>
                      <Button
                        onClick={() => {
                          setActiveSection('footer');
                          fetchFooter();
                        }}
                        className="mt-4 bg-green-600 hover:bg-green-700 text-white"
                      >
                        <Plus className="w-4 h-4 mr-2" />
                        Add Footer Item
                      </Button>
                    </div>
                  ) : (
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                      {footer.filter(f => f.isActive).slice(0, 9).map((footerItem) => (
                        <div
                          key={footerItem.id}
                          className="bg-gray-700 rounded-lg p-4 border border-gray-600 hover:border-green-500 transition-colors"
                        >
                          <div className="flex items-start justify-between mb-2">
                            <div className="flex-1">
                              <div className="flex items-center gap-2 mb-1">
                                <span className="px-2 py-1 rounded text-xs font-medium bg-blue-600 text-white">
                                  {footerItem.section}
                                </span>
                                {footerItem.isActive && (
                                  <span className="px-2 py-1 rounded text-xs font-medium bg-green-600 text-white">
                                    Active
                                  </span>
                                )}
                              </div>
                              {footerItem.title && (
                                <h3 className="text-white font-semibold text-sm mb-1">{footerItem.title}</h3>
                              )}
                              {footerItem.content && (
                                <p className="text-gray-300 text-xs mb-1 line-clamp-2">{footerItem.content}</p>
                              )}
                              {footerItem.url && (
                                <a href={footerItem.url} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:text-green-300 text-xs break-all">
                                  {footerItem.url}
                                </a>
                              )}
                              <div className="text-xs text-gray-400 mt-2">
                                ID: {footerItem.id}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  )}
                  {footer.filter(f => f.isActive).length > 9 && (
                    <div className="mt-4 text-center">
                      <Button
                        onClick={() => {
                          setActiveSection('footer');
                          fetchFooter();
                        }}
                        variant="outline"
                        className="bg-gray-700 text-gray-300 hover:bg-gray-600 border-gray-600"
                      >
                        View All Footer Items ({footer.filter(f => f.isActive).length})
                      </Button>
                    </div>
                  )}
                </div>
              </div>
            </div>
          )}

          {/* Internships Section */}
          {activeSection === 'internships' && (
            <div className="space-y-6">
              <div>
                <h1 className="text-3xl font-bold text-white mb-2">Internship Applications</h1>
                <p className="text-gray-400">Manage all internship applications</p>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {loading ? (
                  <div className="p-8 text-center text-gray-400">Loading...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    <table className="w-full table-fixed text-xs">
                      <thead className="bg-gray-700 sticky top-0 z-10">
                        <tr>
                          <th className="w-20 px-2 py-2 text-left text-gray-300 font-semibold">ID</th>
                          <th className="w-32 px-2 py-2 text-left text-gray-300 font-semibold">Name</th>
                          <th className="w-40 px-2 py-2 text-left text-gray-300 font-semibold">Email</th>
                          <th className="w-28 px-2 py-2 text-left text-gray-300 font-semibold">Phone</th>
                          <th className="w-32 px-2 py-2 text-left text-gray-300 font-semibold">College</th>
                          <th className="w-32 px-2 py-2 text-left text-gray-300 font-semibold">Duration & Price</th>
                          <th className="w-40 px-2 py-2 text-left text-gray-300 font-semibold">Skills</th>
                          <th className="w-24 px-2 py-2 text-left text-gray-300 font-semibold">Resume</th>
                          <th className="w-28 px-2 py-2 text-left text-gray-300 font-semibold">Submitted</th>
                          <th className="w-20 px-2 py-2 text-left text-gray-300 font-semibold">Action</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-700">
                        {internships.length === 0 ? (
                          <tr>
                            <td colSpan="10" className="px-2 py-4 text-center text-gray-400 text-xs">
                              No internship applications found
                            </td>
                          </tr>
                        ) : (
                          internships.map((internship) => (
                            <tr key={internship.id} className="hover:bg-gray-700 transition-colors">
                              <td className="px-2 py-2 font-mono text-xs text-green-400 truncate" title={internship.id}>{internship.id}</td>
                              <td className="px-2 py-2 text-white text-xs truncate" title={internship.fullName || internship.full_name}>{internship.fullName || internship.full_name}</td>
                              <td className="px-2 py-2 text-gray-300 text-xs truncate" title={internship.email}>{internship.email}</td>
                              <td className="px-2 py-2 text-gray-300 text-xs truncate" title={internship.phone}>{internship.phone}</td>
                              <td className="px-2 py-2 text-gray-300 text-xs truncate" title={internship.college}>{internship.college}</td>
                              <td className="px-2 py-2">
                                <div className="flex flex-col space-y-1">
                                  <span className="px-1.5 py-0.5 bg-green-600 text-white rounded text-xs">
                                    {internship.duration}m
                                  </span>
                                  {internship.price ? (
                                    <span className="px-1.5 py-0.5 bg-blue-600 text-white rounded text-xs font-semibold">
                                      {parseFloat(internship.price).toLocaleString('en-IN')}
                                    </span>
                                  ) : (
                                    <span className="text-gray-500 text-xs">N/A</span>
                                  )}
                                </div>
                              </td>
                              <td className="px-2 py-2 text-gray-300 text-xs truncate" title={internship.skills}>{internship.skills}</td>
                              <td className="px-2 py-2">
                                {internship.resume ? (
                                  <a
                                    href={internship.resume}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="text-green-400 hover:text-green-300 underline text-xs"
                                  >
                                    View
                                  </a>
                                ) : (
                                  <span className="text-gray-500 text-xs">N/A</span>
                                )}
                              </td>
                              <td className="px-2 py-2 text-xs text-gray-400 truncate" title={formatDate(internship.createdAt)}>
                                {formatDate(internship.createdAt).split(',')[0]}
                              </td>
                              <td className="px-2 py-2">
                                <button
                                  onClick={() => handleDeleteClick('internship', internship.id)}
                                  className="p-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-3.5 h-3.5" />
                                </button>
                              </td>
                            </tr>
                          ))
                        )}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Contacts Section */}
          {activeSection === 'contacts' && (
            <div className="space-y-6">
              <div>
                <h1 className="text-3xl font-bold text-white mb-2">Contact Us Submissions</h1>
                <p className="text-gray-400">Manage all contact form submissions</p>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {loading ? (
                  <div className="p-8 text-center text-gray-400">Loading...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    <table className="w-full table-fixed text-xs">
                      <thead className="bg-gray-700 sticky top-0 z-10">
                        <tr>
                          <th className="w-20 px-2 py-2 text-left text-gray-300 font-semibold">ID</th>
                          <th className="w-32 px-2 py-2 text-left text-gray-300 font-semibold">Name</th>
                          <th className="w-40 px-2 py-2 text-left text-gray-300 font-semibold">Email</th>
                          <th className="w-36 px-2 py-2 text-left text-gray-300 font-semibold">Subject</th>
                          <th className="w-48 px-2 py-2 text-left text-gray-300 font-semibold">Message</th>
                          <th className="w-28 px-2 py-2 text-left text-gray-300 font-semibold">Submitted</th>
                          <th className="w-20 px-2 py-2 text-left text-gray-300 font-semibold">Action</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-700">
                        {contacts.length === 0 ? (
                          <tr>
                            <td colSpan="7" className="px-2 py-4 text-center text-gray-400 text-xs">
                              No contact form submissions found
                            </td>
                          </tr>
                        ) : (
                          contacts.map((contact) => (
                            <tr key={contact.id} className="hover:bg-gray-700 transition-colors">
                              <td className="px-2 py-2 font-mono text-green-400 truncate" title={contact.id}>{contact.id}</td>
                              <td className="px-2 py-2 text-white truncate" title={contact.fullname}>{contact.fullname}</td>
                              <td className="px-2 py-2 text-gray-300 truncate" title={contact.email}>{contact.email}</td>
                              <td className="px-2 py-2 text-gray-300 truncate" title={contact.subject}>{contact.subject}</td>
                              <td className="px-2 py-2">
                                <div className="text-gray-300 truncate" title={contact.message}>
                                  {contact.message}
                                </div>
                              </td>
                              <td className="px-2 py-2 text-gray-400 truncate" title={formatDate(contact.createdAt)}>
                                {formatDate(contact.createdAt).split(',')[0]}
                              </td>
                              <td className="px-2 py-2">
                                <button
                                  onClick={() => handleDeleteClick('contact', contact.id)}
                                  className="p-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-3.5 h-3.5" />
                                </button>
                              </td>
                            </tr>
                          ))
                        )}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Pricing Management Section */}
          {activeSection === 'pricing' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Internship Pricing Management</h1>
                  <p className="text-gray-400">Update pricing for different internship durations</p>
                </div>
                <Button
                  onClick={() => setAddPricingDialogOpen(true)}
                  className="bg-green-600 hover:bg-green-700 text-white"
                >
                  <Settings className="w-4 h-4 mr-2" />
                  Add New Pricing
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {pricingLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading...</div>
                ) : (
                  <div>
                    <table className="w-full text-xs">
                      <thead className="bg-gray-700">
                        <tr>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Duration (Months)</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Price ()</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Status</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Action</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-700">
                        {pricings.length === 0 ? (
                          <tr>
                            <td colSpan="4" className="px-4 py-4 text-center text-gray-400 text-xs">
                              No pricing plans found. Default prices will be used.
                            </td>
                          </tr>
                        ) : (
                          pricings.map((pricing) => (
                            <tr key={pricing.id} className="hover:bg-gray-700 transition-colors">
                              <td className="px-4 py-3">
                                <div className="flex items-center space-x-2">
                                  <div className="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center text-white font-bold text-sm">
                                    {pricing.duration}
                                  </div>
                                  <div className="text-white font-semibold text-xs">
                                    {pricing.duration} Month{pricing.duration > 1 ? 's' : ''}
                                  </div>
                                </div>
                              </td>
                              <td className="px-4 py-3">
                                <input
                                  type="number"
                                  min="0"
                                  step="0.01"
                                  value={pricing.price}
                                  onChange={(e) => handlePricingChange(pricing.duration, e.target.value)}
                                  className="w-32 px-3 py-1.5 bg-gray-700 border border-gray-600 rounded text-white font-semibold text-xs focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500"
                                />
                              </td>
                              <td className="px-4 py-3">
                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                  pricing.isActive 
                                    ? 'bg-green-600 text-white' 
                                    : 'bg-gray-600 text-gray-300'
                                }`}>
                                  {pricing.isActive ? 'Active' : 'Inactive'}
                                </span>
                              </td>
                              <td className="px-4 py-3">
                                <button
                                  onClick={() => handleDeleteClick('pricing', pricing.id)}
                                  className="p-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-3.5 h-3.5" />
                                </button>
                              </td>
                            </tr>
                          ))
                        )}
                      </tbody>
                    </table>
                    {pricings.length > 0 && (
                      <div className="p-6 border-t border-gray-700 flex justify-end">
                        <Button
                          onClick={handleSavePricings}
                          disabled={pricingLoading}
                          className="bg-green-600 hover:bg-green-700 text-white px-8 py-2"
                        >
                          {pricingLoading ? 'Saving...' : 'Save All Prices'}
                        </Button>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Updates Management Section */}
          {activeSection === 'updates' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Updates & Announcements</h1>
                  <p className="text-gray-400">Manage updates and announcements for the website</p>
                </div>
                <Button
                  onClick={() => {
                    setNewUpdate({ title: '', description: '', type: 'announcement', isActive: true });
                    setAddUpdateDialogOpen(true);
                  }}
                  className="bg-green-600 hover:bg-green-700 text-white"
                >
                  <TrendingUp className="w-4 h-4 mr-2" />
                  Add New Update
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {updatesLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    <table className="w-full text-xs">
                      <thead className="bg-gray-700 sticky top-0 z-10">
                        <tr>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Title</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Description</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Type</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Status</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Created</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Action</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-700">
                        {updates.length === 0 ? (
                          <tr>
                            <td colSpan="6" className="px-4 py-4 text-center text-gray-400 text-xs">
                              No updates found. Create your first update!
                            </td>
                          </tr>
                        ) : (
                          updates.map((update) => (
                            <tr key={update.id} className="hover:bg-gray-700 transition-colors">
                              <td className="px-4 py-3 text-white font-semibold truncate max-w-xs" title={update.title}>
                                {update.title}
                              </td>
                              <td className="px-4 py-3 text-gray-300 truncate max-w-md" title={update.description}>
                                {update.description}
                              </td>
                              <td className="px-4 py-3">
                                <span className="px-2 py-1 rounded text-xs font-medium bg-blue-600 text-white">
                                  {update.type || 'announcement'}
                                </span>
                              </td>
                              <td className="px-4 py-3">
                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                  update.isActive 
                                    ? 'bg-green-600 text-white' 
                                    : 'bg-gray-600 text-gray-300'
                                }`}>
                                  {update.isActive ? 'Active' : 'Inactive'}
                                </span>
                              </td>
                              <td className="px-4 py-3 text-gray-400 truncate" title={formatDate(update.createdAt)}>
                                {formatDate(update.createdAt).split(',')[0]}
                              </td>
                              <td className="px-4 py-3">
                                <div className="flex items-center space-x-2">
                                  <button
                                    onClick={() => handleEditUpdateClick(update)}
                                    className="p-1.5 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                    title="Edit"
                                  >
                                    <Settings className="w-3.5 h-3.5" />
                                  </button>
                                  <button
                                    onClick={() => handleDeleteUpdateClick(update.id)}
                                    className="p-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                    title="Delete"
                                  >
                                    <Trash2 className="w-3.5 h-3.5" />
                                  </button>
                                </div>
                              </td>
                            </tr>
                          ))
                        )}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Chatbot Management Section */}
          {activeSection === 'chatbot' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Chatbot Conversation Flow</h1>
                  <p className="text-gray-400">Manage questions, options, and answers for the chatbot</p>
                </div>
                <Button
                  onClick={() => {
                    setNewQuestion({ 
                      question: '', 
                      options: [{ option: '', answer: '', nextQuestionId: null }], 
                      isActive: true, 
                      isInitial: false, 
                      orderIndex: 0 
                    });
                    setAddQuestionDialogOpen(true);
                  }}
                  className="bg-green-600 hover:bg-green-700 text-white"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add New Question
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {conversationsLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading chatbot questions...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    <table className="w-full text-xs">
                      <thead className="bg-gray-700 sticky top-0 z-10">
                        <tr>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">ID</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Question</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Options & Answers</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Initial?</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Order</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Status</th>
                          <th className="px-4 py-2 text-left text-gray-300 font-semibold">Action</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-700">
                        {conversations.length === 0 ? (
                          <tr>
                            <td colSpan="7" className="px-4 py-4 text-center text-gray-400 text-xs">
                              No chatbot questions found. Add your first question!
                            </td>
                          </tr>
                        ) : (
                          conversations.map((conv) => (
                            <tr key={conv.id} className="hover:bg-gray-700 transition-colors">
                              <td className="px-4 py-3 text-gray-400 font-mono text-xs" title={conv.id}>
                                {conv.id}
                              </td>
                              <td className="px-4 py-3 text-white font-semibold max-w-xs" title={conv.question}>
                                {conv.question}
                              </td>
                              <td className="px-4 py-3 max-w-md">
                                <div className="space-y-1">
                                  {Array.isArray(conv.options) && conv.options.length > 0 ? (
                                    conv.options.map((opt, idx) => (
                                      <div key={idx} className="bg-gray-700 p-2 rounded-md text-gray-300 mb-2">
                                        <p className="font-medium text-white text-xs mb-1">
                                          <span className="text-purple-400">Option {idx + 1}:</span> {opt.option || '(Empty)'}
                                        </p>
                                        <p className="text-xs mb-1">
                                          <span className="text-blue-400">Answer:</span> {opt.answer || '(Empty)'}
                                        </p>
                                        {opt.nextQuestionId ? (
                                          <p className="text-xs text-green-400">
                                            <span className="text-green-300">Next Question ID:</span> {opt.nextQuestionId}
                                          </p>
                                        ) : (
                                          <p className="text-xs text-gray-500 italic">No next question</p>
                                        )}
                                      </div>
                                    ))
                                  ) : (
                                    <span className="text-gray-500 text-xs italic">No options</span>
                                  )}
                                </div>
                              </td>
                              <td className="px-4 py-3">
                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                  conv.isInitial 
                                    ? 'bg-purple-600 text-white' 
                                    : 'bg-gray-600 text-gray-300'
                                }`}>
                                  {conv.isInitial ? 'Yes' : 'No'}
                                </span>
                              </td>
                              <td className="px-4 py-3 text-gray-300">{conv.orderIndex}</td>
                              <td className="px-4 py-3">
                                <span className={`px-2 py-1 rounded text-xs font-medium ${
                                  conv.isActive 
                                    ? 'bg-green-600 text-white' 
                                    : 'bg-gray-600 text-gray-300'
                                }`}>
                                  {conv.isActive ? 'Active' : 'Inactive'}
                                </span>
                              </td>
                              <td className="px-4 py-3">
                                <div className="flex items-center space-x-2">
                                  <button
                                    onClick={() => handleEditQuestionClick(conv)}
                                    className="p-1.5 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                    title="Edit"
                                  >
                                    <Edit className="w-3.5 h-3.5" />
                                  </button>
                                  <button
                                    onClick={() => handleDeleteQuestionClick(conv.id)}
                                    className="p-1.5 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                    title="Delete"
                                  >
                                    <Trash2 className="w-3.5 h-3.5" />
                                  </button>
                                </div>
                              </td>
                            </tr>
                          ))
                        )}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Products Management Section */}
          {activeSection === 'products' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Products Management</h1>
                  <p className="text-gray-400">Manage your company products, features, and URLs</p>
                </div>
                <Button
                  onClick={() => {
                    setNewProduct({ name: '', description: '', url: '', icon: 'Sparkles', features: [], isActive: true, orderIndex: 0 });
                    setNewFeature('');
                    setAddProductDialogOpen(true);
                  }}
                  className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add New Product
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {productsLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading products...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    {products.length === 0 ? (
                      <div className="p-8 text-center text-gray-400">No products found. Create your first product!</div>
                    ) : (
                      <div className="divide-y divide-gray-700">
                        {products.map((product) => (
                          <div key={product.id} className="p-6 hover:bg-gray-700 transition-colors">
                            <div className="flex items-start justify-between mb-4">
                              <div className="flex-1">
                                <div className="flex items-center gap-3 mb-2">
                                  <h3 className="text-white font-semibold text-lg">{product.name}</h3>
                                  <span className={`px-2 py-1 rounded text-xs ${
                                    product.isActive
                                      ? 'bg-green-600 text-white'
                                      : 'bg-gray-600 text-gray-300'
                                  }`}>
                                    {product.isActive ? 'Active' : 'Inactive'}
                                  </span>
                                </div>
                                <p className="text-gray-400 text-sm mb-3">{product.description}</p>
                                <p className="text-gray-500 text-xs mb-3">
                                  <span className="font-medium">URL:</span> <a href={product.url} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:text-green-300">{product.url}</a>
                                </p>
                                <p className="text-gray-500 text-xs mb-3">
                                  <span className="font-medium">Icon:</span> {product.icon} | <span className="font-medium">Order:</span> {product.orderIndex}
                                </p>
                                {Array.isArray(product.features) && product.features.length > 0 && (
                                  <div className="mt-3">
                                    <p className="text-gray-300 text-sm font-medium mb-2">Features:</p>
                                    <div className="flex flex-wrap gap-2">
                                      {product.features.map((feature, idx) => (
                                        <span key={idx} className="px-2 py-1 bg-gray-700 rounded text-xs text-gray-300">
                                          {feature}
                                        </span>
                                      ))}
                                    </div>
                                  </div>
                                )}
                              </div>
                              <div className="flex items-center space-x-2 ml-4">
                                <button
                                  onClick={() => handleEditProductClick(product)}
                                  className="p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                  title="Edit"
                                >
                                  <Edit className="w-4 h-4" />
                                </button>
                                <button
                                  onClick={() => handleDeleteProductClick(product.id)}
                                  className="p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-4 h-4" />
                                </button>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Services Management Section */}
          {activeSection === 'services' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Services Management</h1>
                  <p className="text-gray-400">Manage your company services and offerings</p>
                </div>
                <Button
                  onClick={() => {
                    setNewService({ title: '', description: '', fullDescription: '', icon: 'code', isActive: true, orderIndex: 0 });
                    setAddServiceDialogOpen(true);
                  }}
                  className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add New Service
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {servicesLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading services...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    {services.length === 0 ? (
                      <div className="p-8 text-center text-gray-400">No services found. Create your first service!</div>
                    ) : (
                      <div className="divide-y divide-gray-700">
                        {services.map((service) => (
                          <div key={service.id} className="p-6 hover:bg-gray-700 transition-colors">
                            <div className="flex items-start justify-between mb-4">
                              <div className="flex-1">
                                <div className="flex items-center gap-3 mb-2">
                                  <h3 className="text-white font-semibold text-lg">{service.title}</h3>
                                  <span className={`px-2 py-1 rounded text-xs ${
                                    service.isActive
                                      ? 'bg-green-600 text-white'
                                      : 'bg-gray-600 text-gray-300'
                                  }`}>
                                    {service.isActive ? 'Active' : 'Inactive'}
                                  </span>
                                  <span className="text-gray-500 text-xs">Icon: {service.icon}</span>
                                  <span className="text-gray-500 text-xs">Order: {service.orderIndex}</span>
                                </div>
                                <p className="text-gray-400 text-sm mb-2">{service.description}</p>
                                {service.fullDescription && (
                                  <p className="text-gray-500 text-xs italic">Full Description: {service.fullDescription.substring(0, 100)}...</p>
                                )}
                              </div>
                              <div className="flex items-center space-x-2 ml-4">
                                <button
                                  onClick={() => handleEditServiceClick(service)}
                                  className="p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                  title="Edit"
                                >
                                  <Edit className="w-4 h-4" />
                                </button>
                                <button
                                  onClick={() => handleDeleteServiceClick(service.id)}
                                  className="p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-4 h-4" />
                                </button>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Testimonials Management Section */}
          {activeSection === 'testimonials' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Testimonials Management</h1>
                  <p className="text-gray-400">Manage client testimonials and reviews</p>
                </div>
                <Button
                  onClick={() => {
                    setNewTestimonial({ quote: '', name: '', title: '', company: '', rating: 5, isActive: true, orderIndex: 0 });
                    setAddTestimonialDialogOpen(true);
                  }}
                  className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add New Testimonial
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {testimonialsLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading testimonials...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    {testimonials.length === 0 ? (
                      <div className="p-8 text-center text-gray-400">No testimonials found. Create your first testimonial!</div>
                    ) : (
                      <div className="divide-y divide-gray-700">
                        {testimonials.map((testimonial) => (
                          <div key={testimonial.id} className="p-6 hover:bg-gray-700 transition-colors">
                            <div className="flex items-start justify-between mb-4">
                              <div className="flex-1">
                                <div className="flex items-center gap-3 mb-2">
                                  <h3 className="text-white font-semibold text-lg">{testimonial.name}</h3>
                                  <span className="text-gray-400 text-sm">{testimonial.title}, {testimonial.company}</span>
                                  <span className={`px-2 py-1 rounded text-xs ${
                                    testimonial.isActive
                                      ? 'bg-green-600 text-white'
                                      : 'bg-gray-600 text-gray-300'
                                  }`}>
                                    {testimonial.isActive ? 'Active' : 'Inactive'}
                                  </span>
                                  <div className="flex items-center gap-1">
                                    {[1, 2, 3, 4, 5].map((star) => (
                                      <Star
                                        key={star}
                                        className={`w-4 h-4 ${
                                          star <= testimonial.rating
                                            ? 'text-yellow-400 fill-yellow-400'
                                            : 'text-gray-500'
                                        }`}
                                      />
                                    ))}
                                  </div>
                                  <span className="text-gray-500 text-xs">Order: {testimonial.orderIndex}</span>
                                </div>
                                <p className="text-gray-400 text-sm italic">"{testimonial.quote}"</p>
                              </div>
                              <div className="flex items-center space-x-2 ml-4">
                                <button
                                  onClick={() => handleEditTestimonialClick(testimonial)}
                                  className="p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                  title="Edit"
                                >
                                  <Edit className="w-4 h-4" />
                                </button>
                                <button
                                  onClick={() => handleDeleteTestimonialClick(testimonial.id)}
                                  className="p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-4 h-4" />
                                </button>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Footer Management Section */}
          {activeSection === 'footer' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Footer Management</h1>
                  <p className="text-gray-400">Manage footer content, links, and social media</p>
                </div>
                <Button
                  onClick={() => {
                    setNewFooter({
                      section: 'company',
                      title: '',
                      content: '',
                      url: '',
                      icon: '',
                      orderIndex: 0,
                      isActive: true,
                    });
                    setAddFooterDialogOpen(true);
                  }}
                  className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add Footer Item
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {footerLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading footer...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    {footer.length === 0 ? (
                      <div className="p-8 text-center text-gray-400">No footer items found. Create your first footer item!</div>
                    ) : (
                      <div className="divide-y divide-gray-700">
                        {footer.map((footerItem) => (
                          <div key={footerItem.id} className="p-6 hover:bg-gray-700 transition-colors">
                            <div className="flex items-start justify-between mb-4">
                              <div className="flex-1">
                                <div className="flex items-center gap-3 mb-2">
                                  <span className="px-2 py-1 rounded text-xs font-medium bg-blue-600 text-white">
                                    {footerItem.section}
                                  </span>
                                  <span className={`px-2 py-1 rounded text-xs ${
                                    footerItem.isActive
                                      ? 'bg-green-600 text-white'
                                      : 'bg-gray-600 text-gray-300'
                                  }`}>
                                    {footerItem.isActive ? 'Active' : 'Inactive'}
                                  </span>
                                  <span className="text-gray-500 text-xs">Order: {footerItem.orderIndex}</span>
                                  <span className="text-gray-500 text-xs">ID: {footerItem.id}</span>
                                </div>
                                {footerItem.title && (
                                  <h3 className="text-white font-semibold text-lg mb-1">{footerItem.title}</h3>
                                )}
                                {footerItem.content && (
                                  <p className="text-gray-400 text-sm mb-1">{footerItem.content}</p>
                                )}
                                {footerItem.url && (
                                  <a href={footerItem.url} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:text-green-300 text-sm break-all">
                                    {footerItem.url}
                                  </a>
                                )}
                                {footerItem.icon && (
                                  <span className="text-gray-400 text-xs">Icon: {footerItem.icon}</span>
                                )}
                              </div>
                              <div className="flex items-center space-x-2 ml-4">
                                <button
                                  onClick={() => handleEditFooterClick(footerItem)}
                                  className="p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                  title="Edit"
                                >
                                  <Edit className="w-4 h-4" />
                                </button>
                                <button
                                  onClick={() => handleDeleteFooterClick(footerItem.id)}
                                  className="p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-4 h-4" />
                                </button>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Navbar Management Section */}
          {activeSection === 'navbar' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Navbar Management</h1>
                  <p className="text-gray-400">Manage navigation menu links and items</p>
                </div>
                <Button
                  onClick={() => {
                    setNewNavbar({
                      label: '',
                      url: '',
                      orderIndex: 0,
                      isActive: true,
                    });
                    setAddNavbarDialogOpen(true);
                  }}
                  className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add Navbar Item
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {navbarLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading navbar...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    {navbar.length === 0 ? (
                      <div className="p-8 text-center text-gray-400">No navbar items found. Create your first navbar item!</div>
                    ) : (
                      <div className="divide-y divide-gray-700">
                        {navbar.map((navbarItem) => (
                          <div key={navbarItem.id} className="p-6 hover:bg-gray-700 transition-colors">
                            <div className="flex items-start justify-between mb-4">
                              <div className="flex-1">
                                <div className="flex items-center gap-3 mb-2">
                                  <h3 className="text-white font-semibold text-lg">{navbarItem.label}</h3>
                                  <span className={`px-2 py-1 rounded text-xs ${
                                    navbarItem.isActive
                                      ? 'bg-green-600 text-white'
                                      : 'bg-gray-600 text-gray-300'
                                  }`}>
                                    {navbarItem.isActive ? 'Active' : 'Inactive'}
                                  </span>
                                  <span className="text-gray-500 text-xs">Order: {navbarItem.orderIndex}</span>
                                  <span className="text-gray-500 text-xs">ID: {navbarItem.id}</span>
                                </div>
                                <a href={navbarItem.url} target="_blank" rel="noopener noreferrer" className="text-green-400 hover:text-green-300 text-sm break-all">
                                  {navbarItem.url}
                                </a>
                              </div>
                              <div className="flex items-center space-x-2 ml-4">
                                <button
                                  onClick={() => handleEditNavbarClick(navbarItem)}
                                  className="p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                  title="Edit"
                                >
                                  <Edit className="w-4 h-4" />
                                </button>
                                <button
                                  onClick={() => handleDeleteNavbarClick(navbarItem.id)}
                                  className="p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                  title="Delete"
                                >
                                  <Trash2 className="w-4 h-4" />
                                </button>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Contact Information Management Section */}
          {activeSection === 'contactInfo' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Contact Information Management</h1>
                  <p className="text-gray-400">Manage company contact details (office address, email, phone)</p>
                </div>
                <Button
                  onClick={() => {
                    setNewContactInfo({
                      type: 'office',
                      label: '',
                      value: '',
                      orderIndex: 0,
                      isActive: true,
                    });
                    setAddContactInfoDialogOpen(true);
                  }}
                  className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                >
                  <Plus className="w-4 h-4 mr-2" />
                  Add Contact Info
                </Button>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {contactInfoLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading contact information...</div>
                ) : (
                  <div className="overflow-y-auto max-h-[600px]">
                    {contactInfo.length === 0 ? (
                      <div className="p-8 text-center text-gray-400">No contact information found. Create your first contact info item!</div>
                    ) : (
                      <div className="divide-y divide-gray-700">
                        {contactInfo.map((contactInfoItem) => {
                          const getIcon = () => {
                            if (contactInfoItem.type === 'office') return <MapPin className="w-5 h-5 text-white" />;
                            if (contactInfoItem.type === 'email') return <Mail className="w-5 h-5 text-white" />;
                            if (contactInfoItem.type === 'phone') return <Phone className="w-5 h-5 text-white" />;
                            return <Mail className="w-5 h-5 text-white" />;
                          };

                          return (
                            <div key={contactInfoItem.id} className="p-6 hover:bg-gray-700 transition-colors">
                              <div className="flex items-start justify-between mb-4">
                                <div className="flex-1">
                                  <div className="flex items-center gap-3 mb-2">
                                    <div className="bg-green-600 p-2 rounded-lg">
                                      {getIcon()}
                                    </div>
                                    <h3 className="text-white font-semibold text-lg">{contactInfoItem.label}</h3>
                                    <span className={`px-2 py-1 rounded text-xs ${
                                      contactInfoItem.isActive
                                        ? 'bg-green-600 text-white'
                                        : 'bg-gray-600 text-gray-300'
                                    }`}>
                                      {contactInfoItem.isActive ? 'Active' : 'Inactive'}
                                    </span>
                                    <span className="px-2 py-1 rounded text-xs bg-blue-600 text-white">
                                      {contactInfoItem.type}
                                    </span>
                                    <span className="text-gray-500 text-xs">ID: {contactInfoItem.id}</span>
                                  </div>
                                  {contactInfoItem.type === 'email' ? (
                                    <a href={`mailto:${contactInfoItem.value}`} className="text-green-400 hover:text-green-300 text-sm break-all">
                                      {contactInfoItem.value}
                                    </a>
                                  ) : contactInfoItem.type === 'phone' ? (
                                    <a href={`tel:${contactInfoItem.value.replace(/\D/g, '')}`} className="text-green-400 hover:text-green-300 text-sm">
                                      {contactInfoItem.value}
                                    </a>
                                  ) : (
                                    <p className="text-gray-300 text-sm leading-relaxed whitespace-pre-line">{contactInfoItem.value}</p>
                                  )}
                                </div>
                                <div className="flex items-center space-x-2 ml-4">
                                  <button
                                    onClick={() => handleEditContactInfoClick(contactInfoItem)}
                                    className="p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-900/20 rounded transition-colors"
                                    title="Edit"
                                  >
                                    <Edit className="w-4 h-4" />
                                  </button>
                                  <button
                                    onClick={() => handleDeleteContactInfoClick(contactInfoItem.id)}
                                    className="p-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors"
                                    title="Delete"
                                  >
                                    <Trash2 className="w-4 h-4" />
                                  </button>
                                </div>
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Profile Management Section */}
          {activeSection === 'profile' && (
            <div className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <h1 className="text-3xl font-bold text-white mb-2">Admin Profile</h1>
                  <p className="text-gray-400">Manage your account settings and password</p>
                </div>
              </div>

              <div className="bg-gray-800 rounded-lg border border-gray-700 overflow-hidden">
                {profileLoading ? (
                  <div className="p-8 text-center text-gray-400">Loading profile...</div>
                ) : adminProfile ? (
                  <div className="p-6 space-y-6">
                    {/* Profile Photo Section */}
                    <div className="bg-gray-700 rounded-lg p-6 border border-gray-600">
                      <div className="flex items-center gap-6">
                        <div className="relative">
                          {adminProfile.profilePhoto ? (
                            <div className="relative group">
                              <img 
                                src={`${apiUrlForImages}${adminProfile.profilePhoto}`} 
                                alt="Profile" 
                                className="w-24 h-24 rounded-full object-cover border-4 border-green-500"
                              />
                              <button
                                onClick={handleDeletePhoto}
                                disabled={deletingPhoto}
                                className="absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity"
                                title="Delete photo"
                              >
                                <X className="w-4 h-4" />
                              </button>
                            </div>
                          ) : (
                            <div className="w-24 h-24 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center border-4 border-green-500">
                              <User className="w-12 h-12 text-white" />
                            </div>
                          )}
                        </div>
                        <div className="flex-1">
                          <h3 className="text-lg font-semibold text-white mb-2">Profile Photo</h3>
                          <p className="text-gray-400 text-sm mb-4">
                            Upload a profile picture to personalize your account
                          </p>
                          <div className="flex gap-3">
                            <input
                              type="file"
                              id="profile-photo-upload"
                              accept="image/*"
                              onChange={handlePhotoUpload}
                              disabled={uploadingPhoto}
                              className="hidden"
                            />
                            <label 
                              htmlFor="profile-photo-upload" 
                              className="cursor-pointer inline-block"
                            >
                              <div
                                className={`inline-flex items-center justify-center px-4 py-2 rounded-md bg-green-600 hover:bg-green-700 text-white font-medium transition-colors ${uploadingPhoto ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}
                              >
                                {uploadingPhoto ? (
                                  <span className="flex items-center gap-2">
                                    <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                                    Uploading...
                                  </span>
                                ) : (
                                  <span className="flex items-center gap-2">
                                    <Plus className="w-4 h-4" />
                                    {adminProfile.profilePhoto ? 'Change Photo' : 'Upload Photo'}
                                  </span>
                                )}
                              </div>
                            </label>
                            {adminProfile.profilePhoto && (
                              <Button
                                onClick={handleDeletePhoto}
                                disabled={deletingPhoto}
                                variant="outline"
                                className="bg-gray-600 hover:bg-gray-500 text-white border-gray-500"
                              >
                                {deletingPhoto ? (
                                  <span className="flex items-center gap-2">
                                    <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                                    Deleting...
                                  </span>
                                ) : (
                                  <span className="flex items-center gap-2">
                                    <Trash2 className="w-4 h-4" />
                                    Delete
                                  </span>
                                )}
                              </Button>
                            )}
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Profile Information */}
                    <div className="bg-gray-700 rounded-lg p-6 border border-gray-600">
                      <div className="flex items-center justify-between mb-6">
                        <div>
                          <h2 className="text-xl font-semibold text-white">Account Information</h2>
                          <p className="text-gray-400 text-sm">Manage your account details</p>
                        </div>
                      </div>

                      <div className="space-y-4">
                        <div>
                          <Label className="text-gray-300 text-sm mb-2 block">Email Address</Label>
                          <div className="flex items-center justify-between">
                            <div className="flex items-center gap-3">
                              <Mail className="w-5 h-5 text-gray-400" />
                              <span className="text-white">{adminProfile.email}</span>
                            </div>
                            <Button
                              onClick={() => {
                                setEmailData({
                                  email: adminProfile.email,
                                  password: '',
                                });
                                setChangeEmailDialogOpen(true);
                              }}
                              variant="outline"
                              className="bg-gray-600 hover:bg-gray-500 text-white border-gray-500 text-sm"
                            >
                              <Edit className="w-4 h-4 mr-2" />
                              Change Email
                            </Button>
                          </div>
                        </div>

                        <div>
                          <Label className="text-gray-300 text-sm mb-2 block">Account ID</Label>
                          <div className="flex items-center gap-3">
                            <KeyRound className="w-5 h-5 text-gray-400" />
                            <span className="text-gray-400 text-sm">{adminProfile.id}</span>
                          </div>
                        </div>

                        <div className="grid grid-cols-2 gap-4 mt-4">
                          <div>
                            <Label className="text-gray-300 text-sm mb-2 block">Created At</Label>
                            <span className="text-gray-400 text-sm">
                              {new Date(adminProfile.createdAt).toLocaleDateString()}
                            </span>
                          </div>
                          <div>
                            <Label className="text-gray-300 text-sm mb-2 block">Last Updated</Label>
                            <span className="text-gray-400 text-sm">
                              {new Date(adminProfile.updatedAt).toLocaleDateString()}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Change Password Section */}
                    <div className="bg-gray-700 rounded-lg p-6 border border-gray-600">
                      <div className="flex items-center gap-3 mb-4">
                        <Lock className="w-6 h-6 text-green-400" />
                        <h3 className="text-lg font-semibold text-white">Change Password</h3>
                      </div>
                      <p className="text-gray-400 text-sm mb-4">
                        Update your password to keep your account secure. Make sure to use a strong password.
                      </p>
                      <Button
                        onClick={() => {
                          setPasswordData({
                            currentPassword: '',
                            newPassword: '',
                            confirmPassword: '',
                          });
                          setChangePasswordDialogOpen(true);
                        }}
                        className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
                      >
                        <Lock className="w-4 h-4 mr-2" />
                        Change Password
                      </Button>
                    </div>
                  </div>
                ) : (
                  <div className="p-8 text-center text-gray-400">Failed to load profile</div>
                )}
              </div>
            </div>
          )}
        </div>
      </main>

      {/* Delete Confirmation Dialog */}
      <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>
        <AlertDialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-red-500/30 shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-red-500 via-red-400 to-red-500"></div>
          <AlertDialogHeader className="pb-4">
            <div className="flex items-center gap-4 mb-3">
              <div className="w-12 h-12 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center shadow-lg">
                <Trash2 className="w-6 h-6 text-white" />
              </div>
              <div>
                <AlertDialogTitle className="text-2xl font-bold text-white">
                  Are you sure you want to delete?
                </AlertDialogTitle>
              </div>
            </div>
            <AlertDialogDescription className="text-gray-300 text-base leading-relaxed">
              This action <span className="font-semibold text-red-400">cannot be undone</span>. This will permanently delete the {
                itemToDelete.type === 'contact' ? 'contact submission' : 
                itemToDelete.type === 'internship' ? 'internship application' : 
                itemToDelete.type === 'pricing' ? 'pricing plan' :
                itemToDelete.type === 'question' ? 'chatbot question' :
                itemToDelete.type === 'product' ? 'product' :
                itemToDelete.type === 'service' ? 'service' :
                itemToDelete.type === 'testimonial' ? 'testimonial' :
                itemToDelete.type === 'contactInfo' ? 'contact information' :
                itemToDelete.type === 'footer' ? 'footer item' :
                itemToDelete.type === 'navbar' ? 'navbar item' :
                'update'
              } from the database.
            </AlertDialogDescription>
          </AlertDialogHeader>
          <AlertDialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <AlertDialogCancel className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6">
              Cancel
            </AlertDialogCancel>
            <AlertDialogAction
              onClick={handleDeleteConfirm}
              className="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white shadow-lg hover:shadow-red-500/20 transition-all px-6 font-semibold"
            >
              <span className="flex items-center gap-2">
                <Trash2 className="w-4 h-4" />
                Delete
              </span>
            </AlertDialogAction>
          </AlertDialogFooter>
        </AlertDialogContent>
      </AlertDialog>

      {/* Add New Pricing Dialog */}
      <Dialog open={addPricingDialogOpen} onOpenChange={setAddPricingDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-md shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Settings className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Create New Pricing</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Fill in the details to create a new pricing plan
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          <div className="space-y-5 py-6">
            <div className="space-y-2">
              <Label htmlFor="duration" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Duration (Months) <span className="text-red-400">*</span>
              </Label>
              <Input
                id="duration"
                type="number"
                min="1"
                max="12"
                value={newPricing.duration}
                onChange={(e) => setNewPricing(prev => ({ ...prev, duration: e.target.value }))}
                placeholder="e.g., 1, 2, 3..."
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                required
              />
              <p className="text-xs text-gray-400 flex items-center gap-1">
                <span className="text-green-400"></span> Enter the duration in months (1-12)
              </p>
            </div>

            <div className="space-y-2">
              <Label htmlFor="price" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Price () <span className="text-red-400">*</span>
              </Label>
              <Input
                id="price"
                type="number"
                min="0"
                step="0.01"
                value={newPricing.price}
                onChange={(e) => setNewPricing(prev => ({ ...prev, price: e.target.value }))}
                placeholder="e.g., 3000, 4500..."
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                required
              />
              <p className="text-xs text-gray-400 flex items-center gap-1">
                <span className="text-green-400"></span> Enter the price in Indian Rupees ()
              </p>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddPricingDialogOpen(false);
                setNewPricing({ duration: '', price: '' });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleAddPricing}
              disabled={addingPricing}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {addingPricing ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Pricing
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add New Update Dialog */}
      <Dialog open={addUpdateDialogOpen} onOpenChange={setAddUpdateDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <TrendingUp className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Create New Update</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Fill in the details to create a new update or announcement
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          <div className="space-y-5 py-6">
            <div className="space-y-2">
              <Label htmlFor="update-title" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Title <span className="text-red-400">*</span>
              </Label>
              <Input
                id="update-title"
                type="text"
                value={newUpdate.title}
                onChange={(e) => setNewUpdate(prev => ({ ...prev, title: e.target.value }))}
                placeholder="Enter update title"
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="update-description" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Description <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="update-description"
                value={newUpdate.description}
                onChange={(e) => setNewUpdate(prev => ({ ...prev, description: e.target.value }))}
                placeholder="Enter update description/content"
                rows={5}
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                required
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="update-type" className="text-gray-200 font-medium">
                  Type
                </Label>
                <Select
                  value={newUpdate.type}
                  onValueChange={(value) => setNewUpdate(prev => ({ ...prev, type: value }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue placeholder="Select type" />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="announcement">Announcement</SelectItem>
                    <SelectItem value="news">News</SelectItem>
                    <SelectItem value="update">Update</SelectItem>
                    <SelectItem value="feature">Feature</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="update-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newUpdate.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewUpdate(prev => ({ ...prev, isActive: value === 'active' }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddUpdateDialogOpen(false);
                setNewUpdate({ title: '', description: '', type: 'announcement', isActive: true });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleAddUpdate}
              disabled={savingUpdate}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingUpdate ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Update
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Update Dialog */}
      <Dialog open={editUpdateDialogOpen} onOpenChange={setEditUpdateDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-blue-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-blue-400 to-blue-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg">
                <Edit className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Edit Update</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Update the details of this announcement
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          {editingUpdate && (
            <div className="space-y-5 py-6">
              <div className="space-y-2">
                <Label htmlFor="edit-update-title" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-blue-500"></span>
                  Title <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="edit-update-title"
                  type="text"
                  value={editingUpdate.title}
                  onChange={(e) => setEditingUpdate(prev => ({ ...prev, title: e.target.value }))}
                  placeholder="Enter update title"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all h-11"
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-update-description" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-blue-500"></span>
                  Description <span className="text-red-400">*</span>
                </Label>
                <Textarea
                  id="edit-update-description"
                  value={editingUpdate.description}
                  onChange={(e) => setEditingUpdate(prev => ({ ...prev, description: e.target.value }))}
                  placeholder="Enter update description/content"
                  rows={5}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-none"
                  required
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="edit-update-type" className="text-gray-200 font-medium">
                    Type
                  </Label>
                  <Select
                    value={editingUpdate.type}
                    onValueChange={(value) => setEditingUpdate(prev => ({ ...prev, type: value }))}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 h-11">
                      <SelectValue placeholder="Select type" />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="announcement">Announcement</SelectItem>
                      <SelectItem value="news">News</SelectItem>
                      <SelectItem value="update">Update</SelectItem>
                      <SelectItem value="feature">Feature</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-update-status" className="text-gray-200 font-medium">
                    Status
                  </Label>
                  <Select
                    value={editingUpdate.isActive ? 'active' : 'inactive'}
                    onValueChange={(value) => setEditingUpdate(prev => ({ ...prev, isActive: value === 'active' }))}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="active">Active</SelectItem>
                      <SelectItem value="inactive">Inactive</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>
            </div>
          )}

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditUpdateDialogOpen(false);
                setEditingUpdate(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleEditUpdate}
              disabled={savingUpdate}
              className="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-blue-500/20 transition-all px-6 font-semibold"
            >
              {savingUpdate ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add New Question Dialog */}
      <Dialog open={addQuestionDialogOpen} onOpenChange={setAddQuestionDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-purple-500/20 text-white max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 via-purple-400 to-purple-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg">
                <Bot className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Create New Question</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Add a new question with options and answers for the chatbot
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          <div className="space-y-5 py-6">
            <div className="space-y-2">
              <Label htmlFor="question-text" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-purple-500"></span>
                Question <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="question-text"
                value={newQuestion.question}
                onChange={(e) => setNewQuestion(prev => ({ ...prev, question: e.target.value }))}
                placeholder="Enter the question text"
                rows={3}
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none"
                required
              />
            </div>

            <div className="grid grid-cols-3 gap-4">
              <div className="space-y-2">
                <Label htmlFor="is-initial" className="text-gray-200 font-medium">
                  Is Initial Question
                </Label>
                <Select
                  value={newQuestion.isInitial ? 'yes' : 'no'}
                  onValueChange={(value) => setNewQuestion(prev => ({ ...prev, isInitial: value === 'yes' }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="no">No</SelectItem>
                    <SelectItem value="yes">Yes</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="order-index" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="order-index"
                  type="number"
                  value={newQuestion.orderIndex}
                  onChange={(e) => setNewQuestion(prev => ({ ...prev, orderIndex: parseInt(e.target.value) || 0 }))}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="is-active" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newQuestion.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewQuestion(prev => ({ ...prev, isActive: value === 'active' }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>

            <div className="space-y-4 pt-2">
              <div className="flex items-center justify-between pb-2 border-b border-gray-700/50">
                <Label className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-purple-500"></span>
                  Options <span className="text-red-400">*</span>
                </Label>
                <Button
                  type="button"
                  onClick={() => addOption(false)}
                  className="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white text-xs px-4 py-2 shadow-lg"
                >
                  <Plus className="w-3 h-3 mr-1" />
                  Add Option
                </Button>
              </div>
              
              {newQuestion.options.map((option, index) => (
                <div key={index} className="bg-gradient-to-br from-gray-700/50 to-gray-800/50 rounded-lg p-4 space-y-3 border border-gray-600/50 hover:border-purple-500/50 transition-all">
                  <div className="flex items-center justify-between">
                    <span className="text-white font-semibold text-sm flex items-center gap-2">
                      <span className="w-6 h-6 rounded-full bg-purple-600 flex items-center justify-center text-xs">{index + 1}</span>
                      Option {index + 1}
                    </span>
                    {newQuestion.options.length > 1 && (
                      <Button
                        type="button"
                        onClick={() => removeOption(index, false)}
                        className="bg-red-600/80 hover:bg-red-700 text-white text-xs px-3 py-1.5 shadow-md"
                      >
                        <X className="w-3 h-3" />
                      </Button>
                    )}
                  </div>
                  <Input
                    placeholder="Option text (e.g., Our Services)"
                    value={option.option}
                    onChange={(e) => updateOption(index, 'option', e.target.value, false)}
                    className="bg-gray-600/50 border-2 border-gray-500 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-10"
                  />
                  <Textarea
                    placeholder="Answer text"
                    value={option.answer}
                    onChange={(e) => updateOption(index, 'answer', e.target.value, false)}
                    rows={2}
                    className="bg-gray-600/50 border-2 border-gray-500 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 resize-none"
                  />
                  <Input
                    placeholder="Next Question ID (optional, e.g., conv002)"
                    value={option.nextQuestionId || ''}
                    onChange={(e) => updateOption(index, 'nextQuestionId', e.target.value || null, false)}
                    className="bg-gray-600/50 border-2 border-gray-500 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-10"
                  />
                </div>
              ))}
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddQuestionDialogOpen(false);
                setNewQuestion({ 
                  question: '', 
                  options: [{ option: '', answer: '', nextQuestionId: null }], 
                  isActive: true, 
                  isInitial: false, 
                  orderIndex: 0 
                });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleAddQuestion}
              disabled={savingQuestion}
              className="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white shadow-lg hover:shadow-purple-500/20 transition-all px-6 font-semibold"
            >
              {savingQuestion ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Question
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Question Dialog */}
      <Dialog open={editQuestionDialogOpen} onOpenChange={setEditQuestionDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-purple-500/20 text-white max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-purple-500 via-purple-400 to-purple-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-lg">
                <Edit className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Edit Question</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Update the question, options, and answers
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          {editingQuestion && (
            <div className="space-y-5 py-6">
              <div className="space-y-2">
                <Label htmlFor="edit-question-text" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-purple-500"></span>
                  Question <span className="text-red-400">*</span>
                </Label>
                <Textarea
                  id="edit-question-text"
                  value={editingQuestion.question}
                  onChange={(e) => setEditingQuestion(prev => ({ ...prev, question: e.target.value }))}
                  placeholder="Enter the question text"
                  rows={3}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all resize-none"
                  required
                />
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="edit-is-initial" className="text-gray-200 font-medium">
                    Is Initial Question
                  </Label>
                  <Select
                    value={editingQuestion.isInitial ? 'yes' : 'no'}
                    onValueChange={(value) => setEditingQuestion(prev => ({ ...prev, isInitial: value === 'yes' }))}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="no">No</SelectItem>
                      <SelectItem value="yes">Yes</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-order-index" className="text-gray-200 font-medium">
                    Order Index
                  </Label>
                  <Input
                    id="edit-order-index"
                    type="number"
                    value={editingQuestion.orderIndex}
                    onChange={(e) => setEditingQuestion(prev => ({ ...prev, orderIndex: parseInt(e.target.value) || 0 }))}
                    className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-11"
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-is-active" className="text-gray-200 font-medium">
                    Status
                  </Label>
                  <Select
                    value={editingQuestion.isActive ? 'active' : 'inactive'}
                    onValueChange={(value) => setEditingQuestion(prev => ({ ...prev, isActive: value === 'active' }))}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="active">Active</SelectItem>
                      <SelectItem value="inactive">Inactive</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>

              <div className="space-y-4 pt-2">
                <div className="flex items-center justify-between pb-2 border-b border-gray-700/50">
                  <Label className="text-gray-200 font-medium flex items-center gap-2">
                    <span className="w-2 h-2 rounded-full bg-purple-500"></span>
                    Options <span className="text-red-400">*</span>
                  </Label>
                  <Button
                    type="button"
                    onClick={() => addOption(true)}
                    className="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white text-xs px-4 py-2 shadow-lg"
                  >
                    <Plus className="w-3 h-3 mr-1" />
                    Add Option
                  </Button>
                </div>
                
                {editingQuestion.options.map((option, index) => (
                  <div key={index} className="bg-gradient-to-br from-gray-700/50 to-gray-800/50 rounded-lg p-4 space-y-3 border border-gray-600/50 hover:border-purple-500/50 transition-all">
                    <div className="flex items-center justify-between">
                      <span className="text-white font-semibold text-sm flex items-center gap-2">
                        <span className="w-6 h-6 rounded-full bg-purple-600 flex items-center justify-center text-xs">{index + 1}</span>
                        Option {index + 1}
                      </span>
                      {editingQuestion.options.length > 1 && (
                        <Button
                          type="button"
                          onClick={() => removeOption(index, true)}
                          className="bg-red-600/80 hover:bg-red-700 text-white text-xs px-3 py-1.5 shadow-md"
                        >
                          <X className="w-3 h-3" />
                        </Button>
                      )}
                    </div>
                    <Input
                      placeholder="Option text (e.g., Our Services)"
                      value={option.option}
                      onChange={(e) => updateOption(index, 'option', e.target.value, true)}
                      className="bg-gray-600/50 border-2 border-gray-500 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-10"
                    />
                    <Textarea
                      placeholder="Answer text"
                      value={option.answer}
                      onChange={(e) => updateOption(index, 'answer', e.target.value, true)}
                      rows={2}
                      className="bg-gray-600/50 border-2 border-gray-500 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 resize-none"
                    />
                    <Input
                      placeholder="Next Question ID (optional, e.g., conv002)"
                      value={option.nextQuestionId || ''}
                      onChange={(e) => updateOption(index, 'nextQuestionId', e.target.value || null, true)}
                      className="bg-gray-600/50 border-2 border-gray-500 text-white placeholder-gray-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 h-10"
                    />
                  </div>
                ))}
              </div>
            </div>
          )}

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditQuestionDialogOpen(false);
                setEditingQuestion(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleEditQuestion}
              disabled={savingQuestion}
              className="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white shadow-lg hover:shadow-purple-500/20 transition-all px-6 font-semibold"
            >
              {savingQuestion ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Question
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add Product Dialog */}
      <Dialog open={addProductDialogOpen} onOpenChange={setAddProductDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Package className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Add New Product</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Fill in the details to create a new product
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          <div className="space-y-5 py-6">
            <div className="space-y-2">
              <Label htmlFor="product-name" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Product Name <span className="text-red-400">*</span>
              </Label>
              <Input
                id="product-name"
                value={newProduct.name}
                onChange={(e) => setNewProduct({ ...newProduct, name: e.target.value })}
                placeholder="e.g., ExamEntra"
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="product-description" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Description <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="product-description"
                value={newProduct.description}
                onChange={(e) => setNewProduct({ ...newProduct, description: e.target.value })}
                placeholder="Describe your product..."
                rows={4}
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="product-url" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Product URL <span className="text-red-400">*</span>
              </Label>
              <Input
                id="product-url"
                value={newProduct.url}
                onChange={(e) => setNewProduct({ ...newProduct, url: e.target.value })}
                placeholder="https://example.com"
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                required
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="product-icon" className="text-gray-200 font-medium">
                  Icon
                </Label>
                <Select
                  value={newProduct.icon}
                  onValueChange={(value) => setNewProduct({ ...newProduct, icon: value })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="Sparkles">Sparkles</SelectItem>
                    <SelectItem value="Package">Package</SelectItem>
                    <SelectItem value="Rocket">Rocket</SelectItem>
                    <SelectItem value="Code">Code</SelectItem>
                    <SelectItem value="Globe">Globe</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="product-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="product-order"
                  type="number"
                  value={newProduct.orderIndex}
                  onChange={(e) => setNewProduct({ ...newProduct, orderIndex: parseInt(e.target.value) || 0 })}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                />
              </div>
            </div>

            <div className="space-y-2">
              <Label className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Features
              </Label>
              <div className="flex gap-2">
                <Input
                  value={newFeature}
                  onChange={(e) => setNewFeature(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && addFeature()}
                  placeholder="Enter a feature and press Enter"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                />
                <Button
                  type="button"
                  onClick={() => addFeature()}
                  className="bg-green-600 hover:bg-green-700 text-white"
                >
                  Add
                </Button>
              </div>
              {newProduct.features.length > 0 && (
                <div className="flex flex-wrap gap-2 mt-2">
                  {newProduct.features.map((feature, idx) => (
                    <span key={idx} className="px-3 py-1 bg-gray-700 rounded-md text-sm text-gray-300 flex items-center gap-2">
                      {feature}
                      <button
                        onClick={() => removeFeature(idx)}
                        className="text-red-400 hover:text-red-300"
                      >
                        <X className="w-3 h-3" />
                      </button>
                    </span>
                  ))}
                </div>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="product-active" className="text-gray-200 font-medium">
                Status
              </Label>
              <Select
                value={newProduct.isActive ? 'active' : 'inactive'}
                onValueChange={(value) => setNewProduct({ ...newProduct, isActive: value === 'active' })}
              >
                <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent className="bg-gray-800 border-gray-600">
                  <SelectItem value="active">Active</SelectItem>
                  <SelectItem value="inactive">Inactive</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-4">
            <Button
              onClick={() => setAddProductDialogOpen(false)}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleAddProduct}
              disabled={savingProduct}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingProduct ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Product
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Product Dialog */}
      <Dialog open={editProductDialogOpen} onOpenChange={setEditProductDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Package className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Edit Product</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Update the product details
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          {editingProduct && (
            <div className="space-y-5 py-6">
              <div className="space-y-2">
                <Label htmlFor="edit-product-name" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Product Name <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="edit-product-name"
                  value={editingProduct.name}
                  onChange={(e) => setEditingProduct({ ...editingProduct, name: e.target.value })}
                  placeholder="e.g., ExamEntra"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-product-description" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Description <span className="text-red-400">*</span>
                </Label>
                <Textarea
                  id="edit-product-description"
                  value={editingProduct.description}
                  onChange={(e) => setEditingProduct({ ...editingProduct, description: e.target.value })}
                  placeholder="Describe your product..."
                  rows={4}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-product-url" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Product URL <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="edit-product-url"
                  value={editingProduct.url}
                  onChange={(e) => setEditingProduct({ ...editingProduct, url: e.target.value })}
                  placeholder="https://example.com"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                  required
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="edit-product-icon" className="text-gray-200 font-medium">
                    Icon
                  </Label>
                  <Select
                    value={editingProduct.icon}
                    onValueChange={(value) => setEditingProduct({ ...editingProduct, icon: value })}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="Sparkles">Sparkles</SelectItem>
                      <SelectItem value="Package">Package</SelectItem>
                      <SelectItem value="Rocket">Rocket</SelectItem>
                      <SelectItem value="Code">Code</SelectItem>
                      <SelectItem value="Globe">Globe</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-product-order" className="text-gray-200 font-medium">
                    Order Index
                  </Label>
                  <Input
                    id="edit-product-order"
                    type="number"
                    value={editingProduct.orderIndex}
                    onChange={(e) => setEditingProduct({ ...editingProduct, orderIndex: parseInt(e.target.value) || 0 })}
                    className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                  />
                </div>
              </div>

              <div className="space-y-2">
                <Label className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Features
                </Label>
                <div className="flex gap-2">
                  <Input
                    value={newFeature}
                    onChange={(e) => setNewFeature(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && addFeature(true)}
                    placeholder="Enter a feature and press Enter"
                    className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all"
                  />
                  <Button
                    type="button"
                    onClick={() => addFeature(true)}
                    className="bg-green-600 hover:bg-green-700 text-white"
                  >
                    Add
                  </Button>
                </div>
                {editingProduct.features && editingProduct.features.length > 0 && (
                  <div className="flex flex-wrap gap-2 mt-2">
                    {editingProduct.features.map((feature, idx) => (
                      <span key={idx} className="px-3 py-1 bg-gray-700 rounded-md text-sm text-gray-300 flex items-center gap-2">
                        {feature}
                        <button
                          onClick={() => removeFeature(idx, true)}
                          className="text-red-400 hover:text-red-300"
                        >
                          <X className="w-3 h-3" />
                        </button>
                      </span>
                    ))}
                  </div>
                )}
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-product-active" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={editingProduct.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setEditingProduct({ ...editingProduct, isActive: value === 'active' })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          )}

          <DialogFooter className="border-t border-gray-700/50 pt-4">
            <Button
              onClick={() => setEditProductDialogOpen(false)}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleUpdateProduct}
              disabled={savingProduct}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingProduct ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Product
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add New Service Dialog */}
      <Dialog open={addServiceDialogOpen} onOpenChange={setAddServiceDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Settings className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Add New Service</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Fill in the details to create a new service
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          <div className="space-y-5 py-6">
            <div className="space-y-2">
              <Label htmlFor="service-title" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Title <span className="text-red-400">*</span>
              </Label>
              <Input
                id="service-title"
                type="text"
                value={newService.title}
                onChange={(e) => setNewService(prev => ({ ...prev, title: e.target.value }))}
                placeholder="e.g., Web Development"
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="service-description" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Description <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="service-description"
                value={newService.description}
                onChange={(e) => setNewService(prev => ({ ...prev, description: e.target.value }))}
                placeholder="Enter service description"
                rows={3}
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="service-full-description" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Full Description (Optional)
              </Label>
              <Textarea
                id="service-full-description"
                value={newService.fullDescription}
                onChange={(e) => setNewService(prev => ({ ...prev, fullDescription: e.target.value }))}
                placeholder="Enter detailed service description for modal"
                rows={4}
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
              />
            </div>

            <div className="grid grid-cols-3 gap-4">
              <div className="space-y-2">
                <Label htmlFor="service-icon" className="text-gray-200 font-medium">
                  Icon
                </Label>
                <Select
                  value={newService.icon}
                  onValueChange={(value) => setNewService(prev => ({ ...prev, icon: value }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue placeholder="Select icon" />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="code">Code</SelectItem>
                    <SelectItem value="settings">Settings</SelectItem>
                    <SelectItem value="cloud">Cloud</SelectItem>
                    <SelectItem value="design">Design</SelectItem>
                    <SelectItem value="consulting">Consulting</SelectItem>
                    <SelectItem value="security">Security</SelectItem>
                    <SelectItem value="staffing">Staffing</SelectItem>
                    <SelectItem value="maintenance">Maintenance</SelectItem>
                    <SelectItem value="marketing">Marketing</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="service-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="service-order"
                  type="number"
                  value={newService.orderIndex}
                  onChange={(e) => setNewService(prev => ({ ...prev, orderIndex: parseInt(e.target.value) || 0 }))}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="service-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newService.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewService(prev => ({ ...prev, isActive: value === 'active' }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddServiceDialogOpen(false);
                setNewService({ title: '', description: '', fullDescription: '', icon: 'code', isActive: true, orderIndex: 0 });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleAddService}
              disabled={savingService}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingService ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Service
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Service Dialog */}
      <Dialog open={editServiceDialogOpen} onOpenChange={setEditServiceDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Settings className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Edit Service</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Update the service details
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          {editingService && (
            <div className="space-y-5 py-6">
              <div className="space-y-2">
                <Label htmlFor="edit-service-title" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Title <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="edit-service-title"
                  type="text"
                  value={editingService.title}
                  onChange={(e) => setEditingService({ ...editingService, title: e.target.value })}
                  placeholder="e.g., Web Development"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-service-description" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Description <span className="text-red-400">*</span>
                </Label>
                <Textarea
                  id="edit-service-description"
                  value={editingService.description}
                  onChange={(e) => setEditingService({ ...editingService, description: e.target.value })}
                  placeholder="Enter service description"
                  rows={3}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-service-full-description" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Full Description (Optional)
                </Label>
                <Textarea
                  id="edit-service-full-description"
                  value={editingService.fullDescription || ''}
                  onChange={(e) => setEditingService({ ...editingService, fullDescription: e.target.value })}
                  placeholder="Enter detailed service description for modal"
                  rows={4}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                />
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="edit-service-icon" className="text-gray-200 font-medium">
                    Icon
                  </Label>
                  <Select
                    value={editingService.icon}
                    onValueChange={(value) => setEditingService({ ...editingService, icon: value })}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                      <SelectValue placeholder="Select icon" />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="code">Code</SelectItem>
                      <SelectItem value="settings">Settings</SelectItem>
                      <SelectItem value="cloud">Cloud</SelectItem>
                      <SelectItem value="design">Design</SelectItem>
                      <SelectItem value="consulting">Consulting</SelectItem>
                      <SelectItem value="security">Security</SelectItem>
                      <SelectItem value="staffing">Staffing</SelectItem>
                      <SelectItem value="maintenance">Maintenance</SelectItem>
                      <SelectItem value="marketing">Marketing</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-service-order" className="text-gray-200 font-medium">
                    Order Index
                  </Label>
                  <Input
                    id="edit-service-order"
                    type="number"
                    value={editingService.orderIndex}
                    onChange={(e) => setEditingService({ ...editingService, orderIndex: parseInt(e.target.value) || 0 })}
                    className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-service-status" className="text-gray-200 font-medium">
                    Status
                  </Label>
                  <Select
                    value={editingService.isActive ? 'active' : 'inactive'}
                    onValueChange={(value) => setEditingService({ ...editingService, isActive: value === 'active' })}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="active">Active</SelectItem>
                      <SelectItem value="inactive">Inactive</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>
            </div>
          )}

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditServiceDialogOpen(false);
                setEditingService(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleEditService}
              disabled={savingService}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingService ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Service
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add New Testimonial Dialog */}
      <Dialog open={addTestimonialDialogOpen} onOpenChange={setAddTestimonialDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Star className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Add New Testimonial</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Fill in the details to create a new testimonial
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          <div className="space-y-5 py-6">
            <div className="space-y-2">
              <Label htmlFor="testimonial-quote" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Quote <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="testimonial-quote"
                value={newTestimonial.quote}
                onChange={(e) => setNewTestimonial(prev => ({ ...prev, quote: e.target.value }))}
                placeholder="Enter testimonial quote"
                rows={4}
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                required
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="testimonial-name" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Name <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="testimonial-name"
                  type="text"
                  value={newTestimonial.name}
                  onChange={(e) => setNewTestimonial(prev => ({ ...prev, name: e.target.value }))}
                  placeholder="e.g., John Doe"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="testimonial-title" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Title <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="testimonial-title"
                  type="text"
                  value={newTestimonial.title}
                  onChange={(e) => setNewTestimonial(prev => ({ ...prev, title: e.target.value }))}
                  placeholder="e.g., CEO, Principal"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                  required
                />
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="testimonial-company" className="text-gray-200 font-medium flex items-center gap-2">
                <span className="w-2 h-2 rounded-full bg-green-500"></span>
                Company <span className="text-red-400">*</span>
              </Label>
              <Input
                id="testimonial-company"
                type="text"
                value={newTestimonial.company}
                onChange={(e) => setNewTestimonial(prev => ({ ...prev, company: e.target.value }))}
                placeholder="e.g., Company Name"
                className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                required
              />
            </div>

            <div className="grid grid-cols-3 gap-4">
              <div className="space-y-2">
                <Label htmlFor="testimonial-rating" className="text-gray-200 font-medium">
                  Rating
                </Label>
                <Select
                  value={newTestimonial.rating.toString()}
                  onValueChange={(value) => setNewTestimonial(prev => ({ ...prev, rating: parseInt(value) }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="1">1 Star</SelectItem>
                    <SelectItem value="2">2 Stars</SelectItem>
                    <SelectItem value="3">3 Stars</SelectItem>
                    <SelectItem value="4">4 Stars</SelectItem>
                    <SelectItem value="5">5 Stars</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="testimonial-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="testimonial-order"
                  type="number"
                  value={newTestimonial.orderIndex}
                  onChange={(e) => setNewTestimonial(prev => ({ ...prev, orderIndex: parseInt(e.target.value) || 0 }))}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="testimonial-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newTestimonial.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewTestimonial(prev => ({ ...prev, isActive: value === 'active' }))}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-600">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddTestimonialDialogOpen(false);
                setNewTestimonial({ quote: '', name: '', title: '', company: '', rating: 5, isActive: true, orderIndex: 0 });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleAddTestimonial}
              disabled={savingTestimonial}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingTestimonial ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Testimonial
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Testimonial Dialog */}
      <Dialog open={editTestimonialDialogOpen} onOpenChange={setEditTestimonialDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-green-500/20 text-white max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl p-8">
          <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 via-green-400 to-green-500"></div>
          <DialogHeader className="pb-4 border-b border-gray-700/50">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg">
                <Star className="w-5 h-5 text-white" />
              </div>
              <div>
                <DialogTitle className="text-2xl font-bold text-white">Edit Testimonial</DialogTitle>
                <DialogDescription className="text-gray-400 mt-1">
                  Update the testimonial details
                </DialogDescription>
              </div>
            </div>
          </DialogHeader>
          
          {editingTestimonial && (
            <div className="space-y-5 py-6">
              <div className="space-y-2">
                <Label htmlFor="edit-testimonial-quote" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Quote <span className="text-red-400">*</span>
                </Label>
                <Textarea
                  id="edit-testimonial-quote"
                  value={editingTestimonial.quote}
                  onChange={(e) => setEditingTestimonial({ ...editingTestimonial, quote: e.target.value })}
                  placeholder="Enter testimonial quote"
                  rows={4}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
                  required
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="edit-testimonial-name" className="text-gray-200 font-medium flex items-center gap-2">
                    <span className="w-2 h-2 rounded-full bg-green-500"></span>
                    Name <span className="text-red-400">*</span>
                  </Label>
                  <Input
                    id="edit-testimonial-name"
                    type="text"
                    value={editingTestimonial.name}
                    onChange={(e) => setEditingTestimonial({ ...editingTestimonial, name: e.target.value })}
                    placeholder="e.g., John Doe"
                    className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                    required
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-testimonial-title" className="text-gray-200 font-medium flex items-center gap-2">
                    <span className="w-2 h-2 rounded-full bg-green-500"></span>
                    Title <span className="text-red-400">*</span>
                  </Label>
                  <Input
                    id="edit-testimonial-title"
                    type="text"
                    value={editingTestimonial.title}
                    onChange={(e) => setEditingTestimonial({ ...editingTestimonial, title: e.target.value })}
                    placeholder="e.g., CEO, Principal"
                    className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                    required
                  />
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-testimonial-company" className="text-gray-200 font-medium flex items-center gap-2">
                  <span className="w-2 h-2 rounded-full bg-green-500"></span>
                  Company <span className="text-red-400">*</span>
                </Label>
                <Input
                  id="edit-testimonial-company"
                  type="text"
                  value={editingTestimonial.company}
                  onChange={(e) => setEditingTestimonial({ ...editingTestimonial, company: e.target.value })}
                  placeholder="e.g., Company Name"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                  required
                />
              </div>

              <div className="grid grid-cols-3 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="edit-testimonial-rating" className="text-gray-200 font-medium">
                    Rating
                  </Label>
                  <Select
                    value={editingTestimonial.rating.toString()}
                    onValueChange={(value) => setEditingTestimonial({ ...editingTestimonial, rating: parseInt(value) })}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="1">1 Star</SelectItem>
                      <SelectItem value="2">2 Stars</SelectItem>
                      <SelectItem value="3">3 Stars</SelectItem>
                      <SelectItem value="4">4 Stars</SelectItem>
                      <SelectItem value="5">5 Stars</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-testimonial-order" className="text-gray-200 font-medium">
                    Order Index
                  </Label>
                  <Input
                    id="edit-testimonial-order"
                    type="number"
                    value={editingTestimonial.orderIndex}
                    onChange={(e) => setEditingTestimonial({ ...editingTestimonial, orderIndex: parseInt(e.target.value) || 0 })}
                    className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="edit-testimonial-status" className="text-gray-200 font-medium">
                    Status
                  </Label>
                  <Select
                    value={editingTestimonial.isActive ? 'active' : 'inactive'}
                    onValueChange={(value) => setEditingTestimonial({ ...editingTestimonial, isActive: value === 'active' })}
                  >
                    <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 h-11">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent className="bg-gray-800 border-gray-600">
                      <SelectItem value="active">Active</SelectItem>
                      <SelectItem value="inactive">Inactive</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>
            </div>
          )}

          <DialogFooter className="border-t border-gray-700/50 pt-4 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditTestimonialDialogOpen(false);
                setEditingTestimonial(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              type="button"
              onClick={handleEditTestimonial}
              disabled={savingTestimonial}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingTestimonial ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Testimonial
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Contact Info Dialog */}
      {/* Add Contact Information Dialog */}
      <Dialog open={addContactInfoDialogOpen} onOpenChange={setAddContactInfoDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Add Contact Information
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Create a new contact information item below.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="add-contact-type" className="text-gray-200 font-medium">
                Type <span className="text-red-400">*</span>
              </Label>
              <Select
                value={newContactInfo.type}
                onValueChange={(value) => setNewContactInfo({ ...newContactInfo, type: value })}
              >
                <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent className="bg-gray-800 border-gray-700">
                  <SelectItem value="office">Office</SelectItem>
                  <SelectItem value="email">Email</SelectItem>
                  <SelectItem value="phone">Phone</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-contact-label" className="text-gray-200 font-medium">
                Label <span className="text-red-400">*</span>
              </Label>
              <Input
                id="add-contact-label"
                value={newContactInfo.label}
                onChange={(e) => setNewContactInfo({ ...newContactInfo, label: e.target.value })}
                placeholder="e.g., Our Office, Email Us, Call Us"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-contact-value" className="text-gray-200 font-medium">
                Value <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="add-contact-value"
                value={newContactInfo.value}
                onChange={(e) => setNewContactInfo({ ...newContactInfo, value: e.target.value })}
                placeholder="Enter the contact information value"
                rows={4}
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="add-contact-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="add-contact-order"
                  type="number"
                  value={newContactInfo.orderIndex}
                  onChange={(e) => setNewContactInfo({ ...newContactInfo, orderIndex: parseInt(e.target.value) || 0 })}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="add-contact-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newContactInfo.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewContactInfo({ ...newContactInfo, isActive: value === 'active' })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-700">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddContactInfoDialogOpen(false);
                setNewContactInfo({
                  type: 'office',
                  label: '',
                  value: '',
                  orderIndex: 0,
                  isActive: true,
                });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleAddContactInfo}
              disabled={savingContactInfo}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingContactInfo ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Contact Info
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Contact Information Dialog */}
      <Dialog open={editContactInfoDialogOpen} onOpenChange={setEditContactInfoDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Edit Contact Information
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Update the contact information details below.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="edit-contact-info-type" className="text-gray-200 font-medium">
                Type <span className="text-red-400">*</span>
              </Label>
              <Select
                value={editingContactInfo?.type || ''}
                onValueChange={(value) => setEditingContactInfo({ ...editingContactInfo, type: value })}
              >
                <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                  <SelectValue placeholder="Select type" />
                </SelectTrigger>
                <SelectContent className="bg-gray-800 border-gray-700">
                  <SelectItem value="office">Office</SelectItem>
                  <SelectItem value="email">Email</SelectItem>
                  <SelectItem value="phone">Phone</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-contact-info-label" className="text-gray-200 font-medium">
                Label <span className="text-red-400">*</span>
              </Label>
              <Input
                id="edit-contact-info-label"
                value={editingContactInfo?.label || ''}
                onChange={(e) => setEditingContactInfo({ ...editingContactInfo, label: e.target.value })}
                placeholder="e.g., Our Office, Email Us, Call Us"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-contact-info-value" className="text-gray-200 font-medium">
                Value <span className="text-red-400">*</span>
              </Label>
              <Textarea
                id="edit-contact-info-value"
                value={editingContactInfo?.value || ''}
                onChange={(e) => setEditingContactInfo({ ...editingContactInfo, value: e.target.value })}
                placeholder="Enter contact information value"
                rows={editingContactInfo?.type === 'office' ? 4 : 2}
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-contact-info-status" className="text-gray-200 font-medium">
                Status
              </Label>
              <Select
                value={editingContactInfo?.isActive ? 'active' : 'inactive'}
                onValueChange={(value) => setEditingContactInfo({ ...editingContactInfo, isActive: value === 'active' })}
              >
                <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                  <SelectValue />
                </SelectTrigger>
                <SelectContent className="bg-gray-800 border-gray-700">
                  <SelectItem value="active">Active</SelectItem>
                  <SelectItem value="inactive">Inactive</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditContactInfoDialogOpen(false);
                setEditingContactInfo(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleEditContactInfo}
              disabled={savingContactInfo}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingContactInfo ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Contact Info
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add Footer Dialog */}
      <Dialog open={addFooterDialogOpen} onOpenChange={setAddFooterDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Add Footer Item
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Create a new footer item below.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="add-footer-section" className="text-gray-200 font-medium">
                Section <span className="text-red-400">*</span>
              </Label>
              <Select
                value={newFooter.section}
                onValueChange={(value) => setNewFooter({ ...newFooter, section: value })}
              >
                <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                  <SelectValue placeholder="Select section" />
                </SelectTrigger>
                <SelectContent className="bg-gray-800 border-gray-700">
                  <SelectItem value="company">Company</SelectItem>
                  <SelectItem value="services">Services</SelectItem>
                  <SelectItem value="companyLinks">Company Links</SelectItem>
                  <SelectItem value="social">Social Media</SelectItem>
                  <SelectItem value="copyright">Copyright</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-footer-title" className="text-gray-200 font-medium">
                Title
              </Label>
              <Input
                id="add-footer-title"
                value={newFooter.title}
                onChange={(e) => setNewFooter({ ...newFooter, title: e.target.value })}
                placeholder="e.g., Services, Company, Connect"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-footer-content" className="text-gray-200 font-medium">
                Content
              </Label>
              <Textarea
                id="add-footer-content"
                value={newFooter.content}
                onChange={(e) => setNewFooter({ ...newFooter, content: e.target.value })}
                placeholder="Enter content (e.g., link text, company description)"
                rows={3}
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-footer-url" className="text-gray-200 font-medium">
                URL
              </Label>
              <Input
                id="add-footer-url"
                value={newFooter.url}
                onChange={(e) => setNewFooter({ ...newFooter, url: e.target.value })}
                placeholder="https://example.com or #section"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-footer-icon" className="text-gray-200 font-medium">
                Icon (for social media)
              </Label>
              <Input
                id="add-footer-icon"
                value={newFooter.icon}
                onChange={(e) => setNewFooter({ ...newFooter, icon: e.target.value })}
                placeholder="facebook, twitter, instagram, linkedin"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="add-footer-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="add-footer-order"
                  type="number"
                  value={newFooter.orderIndex}
                  onChange={(e) => setNewFooter({ ...newFooter, orderIndex: parseInt(e.target.value) || 0 })}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="add-footer-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newFooter.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewFooter({ ...newFooter, isActive: value === 'active' })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-700">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddFooterDialogOpen(false);
                setNewFooter({
                  section: 'company',
                  title: '',
                  content: '',
                  url: '',
                  icon: '',
                  orderIndex: 0,
                  isActive: true,
                });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleAddFooter}
              disabled={savingFooter}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingFooter ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Footer Item
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Footer Dialog */}
      <Dialog open={editFooterDialogOpen} onOpenChange={setEditFooterDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Edit Footer Item
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Update the footer item details below.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="edit-footer-section" className="text-gray-200 font-medium">
                Section <span className="text-red-400">*</span>
              </Label>
              <Select
                value={editingFooter?.section || ''}
                onValueChange={(value) => setEditingFooter({ ...editingFooter, section: value })}
              >
                <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                  <SelectValue placeholder="Select section" />
                </SelectTrigger>
                <SelectContent className="bg-gray-800 border-gray-700">
                  <SelectItem value="company">Company</SelectItem>
                  <SelectItem value="services">Services</SelectItem>
                  <SelectItem value="companyLinks">Company Links</SelectItem>
                  <SelectItem value="social">Social Media</SelectItem>
                  <SelectItem value="copyright">Copyright</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-footer-title" className="text-gray-200 font-medium">
                Title
              </Label>
              <Input
                id="edit-footer-title"
                value={editingFooter?.title || ''}
                onChange={(e) => setEditingFooter({ ...editingFooter, title: e.target.value })}
                placeholder="e.g., Services, Company, Connect"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-footer-content" className="text-gray-200 font-medium">
                Content
              </Label>
              <Textarea
                id="edit-footer-content"
                value={editingFooter?.content || ''}
                onChange={(e) => setEditingFooter({ ...editingFooter, content: e.target.value })}
                placeholder="Enter content (e.g., link text, company description)"
                rows={3}
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all resize-none"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-footer-url" className="text-gray-200 font-medium">
                URL
              </Label>
              <Input
                id="edit-footer-url"
                value={editingFooter?.url || ''}
                onChange={(e) => setEditingFooter({ ...editingFooter, url: e.target.value })}
                placeholder="https://example.com or #section"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-footer-icon" className="text-gray-200 font-medium">
                Icon (for social media)
              </Label>
              <Input
                id="edit-footer-icon"
                value={editingFooter?.icon || ''}
                onChange={(e) => setEditingFooter({ ...editingFooter, icon: e.target.value })}
                placeholder="facebook, twitter, instagram, linkedin"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="edit-footer-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="edit-footer-order"
                  type="number"
                  value={editingFooter?.orderIndex || 0}
                  onChange={(e) => setEditingFooter({ ...editingFooter, orderIndex: parseInt(e.target.value) || 0 })}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-footer-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={editingFooter?.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setEditingFooter({ ...editingFooter, isActive: value === 'active' })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-700">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditFooterDialogOpen(false);
                setEditingFooter(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleEditFooter}
              disabled={savingFooter}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingFooter ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Footer Item
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Add Navbar Dialog */}
      <Dialog open={addNavbarDialogOpen} onOpenChange={setAddNavbarDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Add Navbar Item
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Create a new navbar link below.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="add-navbar-label" className="text-gray-200 font-medium">
                Label <span className="text-red-400">*</span>
              </Label>
              <Input
                id="add-navbar-label"
                value={newNavbar.label}
                onChange={(e) => setNewNavbar({ ...newNavbar, label: e.target.value })}
                placeholder="e.g., Services, About, Contact"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="add-navbar-url" className="text-gray-200 font-medium">
                URL <span className="text-red-400">*</span>
              </Label>
              <Input
                id="add-navbar-url"
                value={newNavbar.url}
                onChange={(e) => setNewNavbar({ ...newNavbar, url: e.target.value })}
                placeholder="#services or https://example.com"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="add-navbar-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="add-navbar-order"
                  type="number"
                  value={newNavbar.orderIndex}
                  onChange={(e) => setNewNavbar({ ...newNavbar, orderIndex: parseInt(e.target.value) || 0 })}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="add-navbar-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={newNavbar.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setNewNavbar({ ...newNavbar, isActive: value === 'active' })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-700">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setAddNavbarDialogOpen(false);
                setNewNavbar({
                  label: '',
                  url: '',
                  orderIndex: 0,
                  isActive: true,
                });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleAddNavbar}
              disabled={savingNavbar}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingNavbar ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Creating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Plus className="w-4 h-4" />
                  Create Navbar Item
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Navbar Dialog */}
      <Dialog open={editNavbarDialogOpen} onOpenChange={setEditNavbarDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Edit Navbar Item
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Update the navbar item details below.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="edit-navbar-label" className="text-gray-200 font-medium">
                Label <span className="text-red-400">*</span>
              </Label>
              <Input
                id="edit-navbar-label"
                value={editingNavbar?.label || ''}
                onChange={(e) => setEditingNavbar({ ...editingNavbar, label: e.target.value })}
                placeholder="e.g., Services, About, Contact"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-navbar-url" className="text-gray-200 font-medium">
                URL <span className="text-red-400">*</span>
              </Label>
              <Input
                id="edit-navbar-url"
                value={editingNavbar?.url || ''}
                onChange={(e) => setEditingNavbar({ ...editingNavbar, url: e.target.value })}
                placeholder="#services or https://example.com"
                className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <div className="space-y-2">
                <Label htmlFor="edit-navbar-order" className="text-gray-200 font-medium">
                  Order Index
                </Label>
                <Input
                  id="edit-navbar-order"
                  type="number"
                  value={editingNavbar?.orderIndex || 0}
                  onChange={(e) => setEditingNavbar({ ...editingNavbar, orderIndex: parseInt(e.target.value) || 0 })}
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11"
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="edit-navbar-status" className="text-gray-200 font-medium">
                  Status
                </Label>
                <Select
                  value={editingNavbar?.isActive ? 'active' : 'inactive'}
                  onValueChange={(value) => setEditingNavbar({ ...editingNavbar, isActive: value === 'active' })}
                >
                  <SelectTrigger className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-gray-800 border-gray-700">
                    <SelectItem value="active">Active</SelectItem>
                    <SelectItem value="inactive">Inactive</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setEditNavbarDialogOpen(false);
                setEditingNavbar(null);
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleEditNavbar}
              disabled={savingNavbar}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {savingNavbar ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Edit className="w-4 h-4" />
                  Update Navbar Item
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Change Password Dialog */}
      <Dialog open={changePasswordDialogOpen} onOpenChange={setChangePasswordDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Change Password
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Enter your current password and choose a new secure password.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="current-password" className="text-gray-200 font-medium">
                Current Password <span className="text-red-400">*</span>
              </Label>
              <div className="relative">
                <Input
                  id="current-password"
                  type="password"
                  value={passwordData.currentPassword}
                  onChange={(e) => setPasswordData({ ...passwordData, currentPassword: e.target.value })}
                  placeholder="Enter your current password"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11 pl-10"
                />
                <Lock className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="new-password" className="text-gray-200 font-medium">
                New Password <span className="text-red-400">*</span>
              </Label>
              <div className="relative">
                <Input
                  id="new-password"
                  type="password"
                  value={passwordData.newPassword}
                  onChange={(e) => setPasswordData({ ...passwordData, newPassword: e.target.value })}
                  placeholder="Enter new password (min 6 characters)"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11 pl-10"
                />
                <KeyRound className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
              </div>
              <p className="text-xs text-gray-400">Password must be at least 6 characters long</p>
            </div>

            <div className="space-y-2">
              <Label htmlFor="confirm-password" className="text-gray-200 font-medium">
                Confirm New Password <span className="text-red-400">*</span>
              </Label>
              <div className="relative">
                <Input
                  id="confirm-password"
                  type="password"
                  value={passwordData.confirmPassword}
                  onChange={(e) => setPasswordData({ ...passwordData, confirmPassword: e.target.value })}
                  placeholder="Confirm your new password"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11 pl-10"
                />
                <Lock className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
              </div>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setChangePasswordDialogOpen(false);
                setPasswordData({
                  currentPassword: '',
                  newPassword: '',
                  confirmPassword: '',
                });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleChangePassword}
              disabled={changingPassword}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {changingPassword ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Changing...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Lock className="w-4 h-4" />
                  Change Password
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Change Email Dialog */}
      <Dialog open={changeEmailDialogOpen} onOpenChange={setChangeEmailDialogOpen}>
        <DialogContent className="bg-gradient-to-br from-gray-800 via-gray-800 to-gray-900 border-2 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto p-8">
          <DialogHeader className="space-y-3 pb-4 border-b border-gray-700/50">
            <DialogTitle className="text-2xl font-bold bg-gradient-to-r from-green-400 to-green-600 bg-clip-text text-transparent">
              Change Email Address
            </DialogTitle>
            <DialogDescription className="text-gray-400">
              Enter your new email address and current password to update your email.
            </DialogDescription>
          </DialogHeader>

          <div className="space-y-6 py-6">
            <div className="space-y-2">
              <Label htmlFor="new-email" className="text-gray-200 font-medium">
                New Email Address <span className="text-red-400">*</span>
              </Label>
              <div className="relative">
                <Input
                  id="new-email"
                  type="email"
                  value={emailData.email}
                  onChange={(e) => setEmailData({ ...emailData, email: e.target.value })}
                  placeholder="Enter new email address"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11 pl-10"
                />
                <Mail className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="email-password" className="text-gray-200 font-medium">
                Current Password <span className="text-red-400">*</span>
              </Label>
              <div className="relative">
                <Input
                  id="email-password"
                  type="password"
                  value={emailData.password}
                  onChange={(e) => setEmailData({ ...emailData, password: e.target.value })}
                  placeholder="Enter your current password"
                  className="bg-gray-700/50 border-2 border-gray-600 text-white focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all h-11 pl-10"
                />
                <Lock className="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" />
              </div>
              <p className="text-xs text-gray-400">Enter your current password to confirm the email change</p>
            </div>
          </div>

          <DialogFooter className="border-t border-gray-700/50 pt-6 gap-3">
            <Button
              type="button"
              variant="outline"
              onClick={() => {
                setChangeEmailDialogOpen(false);
                setEmailData({
                  email: '',
                  password: '',
                });
              }}
              className="bg-gray-700/50 text-gray-300 hover:bg-gray-600 border-gray-600 hover:border-gray-500 transition-all px-6"
            >
              Cancel
            </Button>
            <Button
              onClick={handleChangeEmail}
              disabled={changingEmail}
              className="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg hover:shadow-green-500/20 transition-all px-6 font-semibold"
            >
              {changingEmail ? (
                <span className="flex items-center gap-2">
                  <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                  Updating...
                </span>
              ) : (
                <span className="flex items-center gap-2">
                  <Mail className="w-4 h-4" />
                  Update Email
                </span>
              )}
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default Dashboard;
